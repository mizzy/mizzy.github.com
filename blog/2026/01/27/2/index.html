<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      NebelにOGP画像自動生成機能を追加した - Gosuke Miyashita
    </title>
    <!-- TODO: change name and description -->
    <meta name="author" content="Gosuke Miyashita"/>
    <meta name="description" content="A fantastic blog that is fantastic."/>
    <!-- OGP -->
    <meta property="og:title" content="NebelにOGP画像自動生成機能を追加した"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="https://mizzy.org/blog/2026/01/27/2/"/>
    <meta property="og:image" content="https://mizzy.org/blog/2026/01/27/2/ogp.png"/>
    <meta property="og:site_name" content="Gosuke Miyashita"/>
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:title" content="NebelにOGP画像自動生成機能を追加した"/>
    <meta name="twitter:image" content="https://mizzy.org/blog/2026/01/27/2/ogp.png"/>
    <link rel="alternate" type="application/rss+xml" href="/atom.xml"/>
    <link rel="stylesheet" href="/css/base.css" type="text/css" media="screen, projection"/>
    <link rel="stylesheet" href="/css/chroma.css" type="text/css"/>
    <link media="only screen and (max-device-width: 480px)" href="/css/iphone.css" type="text/css" rel="stylesheet"/>
    <link media="only screen and (device-width: 768px)" href="/css/iphone.css" type="text/css" rel="stylesheet"/>
    <link href='https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz' rel='stylesheet' type='text/css'>
    <link rel="apple-touch-icon" href="/apple-touch-icon.png"/>
    <link rel="icon" href="/favicon.png" type="image/png"/>
  </head>
  <body>
    <section class="sidebar">
      <a href="/">
        <!-- TODO: change this gravatar URL -->
        <img src="https://s.gravatar.com/avatar/0d5d8fb9cc4c06f581825f5a61d3f5f1?s=150" height="75" width="75"
             class="avatar"/>
      </a>
      <!-- TODO: change name -->
      <section class="name">
        <a href="/">
          <span id="zach">
            Gosuke
          </span>
          <span id="holman">
            Miyashita
          </span>
        </a>
      </section>
      <!-- TODO: change links -->
      <section class="meta">
        <a href="https://github.com/mizzy">
          <img src="/images/github.png"/>
        </a>
        <a href="https://twitter.com/gosukenator">
          <img src="/images/twitter.png">
        </a>
        <a href="/atom.xml">
          <img src="/images/rss.png"/>
        </a>
      </section>
      <!--
    <section class="sections">
      <ul>
        <li><a href="/about.html">about</a></li>
        <li><a href="/">posts</a></li>
      </ul>
    </section>
    -->
    </section>
    <section class="content autopagerize_page_element">
      <h1>
        <a href="/blog/2026/01/27/2">
          NebelにOGP画像自動生成機能を追加した
        </a>
      </h1>
      <section class="byline">
        2026-01-27 19:08:09 +0900
      </section>
      <p>
        tokuhiromさんの
        <a href="https://blog.64p.org/entry/2026/01/26/110749">
          ogp を設定した
        </a>
        という記事を読んで、そういえば自分もOGP対応しなきゃな、と思い出した。以前から対応しようと思いつつ、画像生成とか面倒だな、と後回しにしていた。でも今なら生成AIでシュッと対応できるな、と思ってやってみた。
      </p>
      <p>
        ちなみにこのブログ記事もClaude Codeが書いたものをそのまま出している。
      </p>
      <p>
        このブログの静的サイトジェネレータである
        <a href="https://github.com/mizzy/nebel">
          Nebel
        </a>
        に、OGP画像を自動生成する機能を追加した。
      </p>
      <hr />
      <h2>
        OGP画像とは
      </h2>
      <p>
        OGP（Open Graph Protocol）画像は、SNSでURLをシェアしたときに表示されるサムネイル画像のこと。TwitterやFacebookなどでリンクを共有すると、タイトルや説明文と一緒に画像が表示される。
      </p>
      <p>
        これまでこのブログにはOGP画像を設定していなかったので、SNSでシェアしてもデフォルトの味気ない表示になっていた。
      </p>
      <hr />
      <h2>
        実装内容
      </h2>
      <p>
        <code>nebel generate</code>
        を実行すると、各記事のタイトルからOGP画像（1200x630px）を自動生成するようにした。
      </p>
      <ul>
        <li>
          <strong>
            サイズ
          </strong>
          : 1200x630px（OGP推奨サイズ）
        </li>
        <li>
          <strong>
            背景
          </strong>
          : ダークグレー（#333）
        </li>
        <li>
          <strong>
            テキスト
          </strong>
          : 記事タイトル（白色、中央配置）
        </li>
        <li>
          <strong>
            フォント
          </strong>
          : Noto Sans CJK JP Bold（日本語対応）
        </li>
      </ul>
      <p>
        生成される画像はこんな感じ。
      </p>
      <p>
        <img src="/blog/2026/01/27/2/ogp.png" alt="OGP画像のサンプル" />
      </p>
      <hr />
      <h2>
        使用ライブラリ
      </h2>
      <p>
        Goで画像を生成するために
        <a href="https://github.com/fogleman/gg">
          fogleman/gg
        </a>
        というライブラリを使った。シンプルなAPIで2D描画ができるので、こういった用途にはちょうど良い。
      </p>
      <p>
        日本語フォントには
        <a href="https://fonts.google.com/noto/specimen/Noto+Sans+JP">
          Noto Sans CJK JP
        </a>
        を使用。CJK（中国語・日本語・韓国語）に対応しているので、日本語タイトルも問題なく描画できる。
      </p>
      <hr />
      <h2>
        テンプレートの変更
      </h2>
      <p>
        HTMLテンプレートには、OGPとTwitter Cardのメタタグを追加した。
      </p>
      <pre class="chroma"><code><span class="line"><span class="cl"><span class="c">&lt;!-- OGP --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:title&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;{{ .Title }}&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;article&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:url&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;https://mizzy.org{{ .Path }}/&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:image&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;https://mizzy.org{{ .OGImagePath }}&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:site_name&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;Gosuke Miyashita&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- Twitter Card --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;twitter:card&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;summary_large_image&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;twitter:title&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;{{ .Title }}&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;twitter:image&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;https://mizzy.org{{ .OGImagePath }}&#34;</span><span class="p">/&gt;</span>
</span></span></code></pre>
      <p>
        これで、SNSでシェアしたときにタイトル入りの画像が表示されるようになる。
      </p>
      <hr />
      <h2>
        今後
      </h2>
      <p>
        デザインは現状かなりシンプルなので、余裕があればもう少し凝ったものにしたい。ロゴを入れたり、グラデーション背景にしたり、といったあたりは比較的簡単にできそう。
      </p>
      <div class="pagination">
        <a href="/blog/2026/01/28/1">
          ↑ newer post
        </a>
        <a href="/blog/2026/01/27/1" rel="next">
          older post ↓
        </a>
      </div>
    </section>
  </body>
</html>