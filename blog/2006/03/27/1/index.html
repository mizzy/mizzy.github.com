<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>DBIx::Class のカスタム JOIN ではまる - Gosuke Miyashita</title>
<link rel="stylesheet" href="/css/fonts.css" type="text/css" charset="utf-8">
<link rel="stylesheet/tass" type="text/x-tass" href="/css/style.tass"/>
<script type="text/javascript" src="/js/tass.js"></script>
<link href="/atom.xml" rel="alternate" title="Gosuke Miyashita" type="application/atom+xml">
</head>
<body>
<h1 class="site-title"><a href="/">Gosuke Miyashita</a></h1>

<div class="content autopagerize_page_element">

  <time>Mar 27<span>th</span>, 2006</time>
  <h1 class="entry-title"><a href="/blog/2006/03/27/1">DBIx::Class のカスタム JOIN ではまる</a></h1>

  <div class="content">
    <p class="entryBody">
<a href="http://search.cpan.org/~mstrout/DBIx-Class-0.06000/lib/DBIx/Class/ResultSet.pm#from" target="_blank">DBIx::Class::ResultSet の from メソッドの説明</a> にしたがって、カスタム JOIN を試みるものの、どうしても join type が指定できない、という現象にはまる。 
</p>

<p class="entryBody">
ドキュメント上では -join-type => 'inner|left|right' って書いてあって、この通りに記述してるのに、全然指定通りの JOIN ができない。で、色々ソース眺めてたら、DBIx::Class::ResultSource のソースにこんな記述が。
</p>

<pre class="code">
return [ { $as => $self->related_source($join)->from,
           <strong>-join_type => $type</strong> }
         $self->resolve_condition($rel_info->{cond}, $as, $alias) ];
</pre>

<p class="entryBody">
-join-type じゃなくて -join_type かよ！これで 3,4 時間無駄にしました…。-join_type に変えたらうまくいきましたよ。
</p>

<p class="entryBody">
自分の様な犠牲者をこれ以上出さないために、Matt S Trout にドキュメントなおしといてね、とメールしておきました。
</p>

  </div>


  <div class="pagination">
    
    <a href="/blog/2006/03/26/1" rel="next">next post</a>
    
    
    
    <a href="/blog/2006/03/30/1">previous post</a>
    
  </div>

</div>

<div class="autopagerize_insert_before"></div>

</body>
</html>
