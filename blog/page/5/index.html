
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Gosuke Miyashita</title>
  <meta name="author" content="Gosuke Miyashita">

  
  <meta name="description" content="[wiki:SystemTap00 SystemTap メモ #0] の続き。今回は SystemTap Beginners Guide の 3.2. SystemTap Scripts から抜粋。 スクリプトのフォーマット SystemTap スクリプトのフォーマットはこんな感じ。 probe &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mizzy.org/blog/page/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Gosuke Miyashita" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-53984-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Gosuke Miyashita</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mizzy.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/13/SystemTap01/">System Tap01</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-07-13T02:44:59+09:00" pubdate>Jul 13<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/07/13/SystemTap01/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>[wiki:SystemTap00 SystemTap メモ #0] の続き。今回は <a href="http://sourceware.org/systemtap/SystemTap_Beginners_Guide/">SystemTap Beginners Guide</a> の <a href="http://sourceware.org/systemtap/SystemTap_Beginners_Guide/scripts.html">3.2. SystemTap Scripts</a> から抜粋。</p>

<hr />

<h1>スクリプトのフォーマット</h1>

<p>SystemTap スクリプトのフォーマットはこんな感じ。</p>

<pre><code>probe event { statements }
</code></pre>

<p>なので、[wiki:SystemTap00 前回] 出てきた、</p>

<pre><code>$ stap -v -e 'probe vfs.read { printf("read performed\n"); exit() }'
</code></pre>

<p>をフォーマットと照らし合わせて読み解くと、<em>「vfs.read イベントが発生したら read performed と表示して exit する」</em>といった意味になる。</p>

<p><em>{ statements }<em>&#8217; の部分は &#8221;&#8217;handler&#8221;&#8217; と呼ばれ、&#8221;&#8217;event&#8221;&#8217; と それに対応した &#8221;&#8217;handler&#8221;&#8217; をあわせて &#8217;</em>probe</em> と呼ぶらしい。</p>

<p>スクリプトの中では関数を定義して呼び出すこともできる。</p>

<pre><code>function function_name(arguments) { statements }

probe event { function_name(arguments) }
</code></pre>

<hr />

<h1>イベント</h1>

<p>イベントは同期イベントと非同期イベントに分かれる。</p>

<h2>同期イベント</h2>

<p>同期イベントはカーネルコード中の特定の場所で命令が実行された場合に発生するイベント。（非同期イベントは後で説明するが、命令実行とは関係なしに発生するイベント。）</p>

<p>同期イベントには以下のようなものがある。</p>

<p><em>syscall.<em>&#8221;&#8221;&#8221;system_call</em></em></p>

<p><em>system_call&#8221; というシステムコールの呼び始めに発生するイベント。呼び終わりに発生するイベントは syscall.&#8221;system_call</em>.return 。close システムコールの呼び始めに発生するイベントは syscall.close、呼び終わりに発生するイベントは syscall.close.return 。</p>

<p><em>vfs.<em>&#8221;&#8221;&#8221;file_operation</em></em></p>

<p>VFS に対して <em>file_operation</em> の呼び始めに発生するイベント。syscall と同様、 .return を付加すると、呼び終わりイベントとなる。</p>

<p><em>kernel.function(&#8221;<em>&#8221;&#8221;&#8221;function&#8221;&#8221;&#8221;</em>&#8221;)</em></p>

<p>カーネルファンクション <em>function</em> の呼び始めに発生するイベント。例えば <em>kernel.function(&#8220;sys_open&#8221;)</em> は sys_open の呼び始めに発生するイベント。.return がつくと呼び終わりイベント。ワイルドカードとして * がつかえる。また、以下のように特定のソースファイル中のファンクションも指定できる。</p>

<pre><code>probe kernel.function("*@net/socket.c") { }
probe kernel.function("*@net/socket.c").return { }
</code></pre>

<p><em>kernel.trace(&#8221;<em>&#8221;&#8221;&#8221;tracepoint&#8221;&#8221;&#8221;</em>&#8221;)</em></p>

<p>カーネル内の特定のトレースポイントで発生するイベント。例えば、<em>kernel.trace(&#8220;kfree_skb&#8221;)</em> だと、カーネル内のネットワークバッファが解放された時にイベントが発生する。</p>

<p><em>module(&#8221;<em>&#8221;&#8221;&#8221;module&#8221;&#8221;&#8221;&#8221;&#8221;).function(&#8220;&#8221;&#8221;&#8221;&#8221;function&#8221;&#8221;&#8221;</em>&#8221;)</em></p>

<p>モジュール内の特定のファンクションが呼ばれた場合に発生するイベント。</p>

<pre><code>probe module("ext3").function("*") { }
probe module("ext3").function("*").return { }
</code></pre>

<p>この例だと、前者は ext3 モジュール内のすべてのファンクションの呼び始めに発生するイベント、後者は呼び終わりに発生するイベント、となる。</p>

<h2>非同期イベント</h2>

<p>非同期イベントはカーネルコード内の命令実行とは無関係に発生するイベント。以下のようなイベントがある。</p>

<p><em>begin</em></p>

<p>SystemTap セッションの開始時（SystemTap スクリプトの実行開始時）に発生するイベント。</p>

<p><em>end</em></p>

<p>SystemTap セッションの終了時に発生するイベント。</p>

<p><em>timer events</em></p>

<p>タイマーイベント。以下の例では4秒ごとにイベントを発生させる。</p>

<pre><code>probe timer.s(4)
{
  printf("hello world\n")
}
</code></pre>

<p>時間単位は上の例の秒以外にも、以下のように指定できる。</p>

<ul>
<li>timer.ms(<em>milliseconds</em>)</li>
<li>timer.us(<em>microseconds</em>)</li>
<li>timer.ns(<em>nanoseconds</em>)</li>
<li>timer.hz(<em>hertz</em>)</li>
<li>timer.jiffies(<em>jiffies</em>)</li>
</ul>


<p>イベントは他にもたくさんあるので、詳しく知りたければ <em>man stapprobes</em> すべし。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/08/SystemTap00/">System Tap00</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-07-08T01:45:26+09:00" pubdate>Jul 8<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/07/08/SystemTap00/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://sourceware.org/systemtap/">SystemTap</a> が以前から気になってたので、ちゃんと調べてみることに。</p>

<p>ざっとググってみた感じだと、<a href="http://sourceware.org/systemtap/SystemTap_Beginners_Guide/">SystemTap Beginners Guide</a> がしっかりまとまっていてわかりやすそうなので、これをベースに調べたことをメモしていく。<a href="http://sourceware.org/systemtap/SystemTap_Beginners_Guide.pdf">PDF 版</a>もあるので Kindle に入れて持ち運べるし。</p>

<h1>SystemTap とは？</h1>

<ul>
<li>カーネルの動きをモニタリングするためのフレームワーク</li>
<li>netstat, ps, top, iostat なんかで得られるのと同じような情報が取得できる</li>
<li>こういった情報が得られるだけではなく、フィルタリングしたり解析したりもできる</li>
</ul>


<p>といったもののようです。DTrace を知ってる方なら、それに似たようなもの、と言えばわかりやすいのかもしれません。（自分は DTrace よく知りませんが。）</p>

<ul>
<li>参考 URL

<ul>
<li>http://sourceware.org/systemtap/SystemTap_Beginners_Guide/introduction.html</li>
<li>http://sourceware.org/systemtap/SystemTap_Beginners_Guide/intro-systemtap-vs-others.html</li>
</ul>
</li>
</ul>


<h1>SystemTap の利用</h1>

<p>CentOS 5 でインストールした際のメモ。</p>

<p>利用している kernel と同じバージョンの kernel-devel パッケージをインストール。（systemtap パッケージを入れると依存で勝手に入るけど、利用中の kernel バージョンと異なる場合もあるので、先に入れておくといいです。）</p>

<pre><code>$ sudo yum install kernel-devel-2.6.18-164.el5
</code></pre>

<p>systemtap パッケージをインストール。</p>

<pre><code>$ sudo yum install sytemtap
</code></pre>

<p>kernel-debuginfo と kernel-debuginfo-common のインストールのために、debuginfo-install コマンドが含まれる yum-utils パッケージをインストール。</p>

<pre><code>$ sudo yum install yum-utils
</code></pre>

<p>kernel-debuginfo と kernel-debuginfo-common を yum で取得できるように、以下のような /etc/yum.repos.d/CentOS-debuginfo.repo を作成。</p>

<pre><code>[debuginfo]
name=CentOS debuginfo
baseurl=http://debuginfo.centos.org/$releasever/$basearch/
gpgcheck=0
enabled=1
</code></pre>

<p>kernel-debuginfo と kernel-debuginfo-common を インストール。</p>

<pre><code>$ sudo debuginfo-install kernel
</code></pre>

<p>kernel-headers も必要かも？</p>

<p>あとは stap コマンドを実行すれば OK。(root 権限が必要だけど、stapdev グループに属しているユーザであれば、権限は不要。)</p>

<pre><code>$ stap -v -e 'probe vfs.read {printf("read performed\n"); exit()}'
Pass 1: parsed user script and 65 library script(s) using 43932virt/19448res/1752shr kb, in 170usr/50sys/210real ms.
Pass 2: analyzed script: 1 probe(s), 10 function(s), 2 embed(s), 1 global(s) using 116696virt/75204res/41808shr kb, in 310usr/50sys/369real ms.
Pass 3: using cached /home/miya/.systemtap/cache/eb/stap_ebec3e35e1d3f3f5cd90569c6319bd2f_4795.c
Pass 4: using cached /home/miya/.systemtap/cache/eb/stap_ebec3e35e1d3f3f5cd90569c6319bd2f_4795.ko
Pass 5: starting run.
read performed
Pass 5: run completed in 20usr/50sys/96real ms.
</code></pre>

<p>-v オプションで詳細表示。v を増やすと更に詳細に。</p>

<p>表示されるメッセージを見るとなんとなくわかるけど、SystemTap スクリプトをコンパイルしてカーネルモジュールを生成して実行してる。なので gcc や make なんかも必要。（なはず。）</p>

<ul>
<li>参考 URL

<ul>
<li>http://sourceware.org/systemtap/SystemTap_Beginners_Guide/using-systemtap.html</li>
</ul>
</li>
</ul>


<h1>他のマシンで実行できる SystemTap モジュールを生成</h1>

<p>上で見たように、SystemTap の利用には、コンパイラや debuginfo パッケージのインストールが必要なんだけど、ポリシー的にそれが許されない環境ではどうするか？実は SystemTap にはコンパイル済みのモジュールを実行する仕組みもある。（このコンパイル済みモジュールのことを、ドキュメントでは Instrumentation と呼んでいる。）</p>

<p>コンパイル済みモジュールは以下のように stap コマンドで生成できる。(-r と -m オプションを指定する。）</p>

<pre><code>$ stap -r 2.6.18-164.el5 -e 'probe vfs.read {exit()}' -m simple -v  [miya@h026]
Pass 1: parsed user script and 65 library script(s) using 43932virt/19448res/1752shr kb, in 180usr/20sys/205real ms.
Pass 2: analyzed script: 1 probe(s), 10 function(s), 2 embed(s), 1 global(s) using 116816virt/75200res/41808shr kb, in 320usr/40sys/364real ms.
Pass 3: translated to C into "/tmp/stapPGBW7a/simple.c" using 116816virt/75940res/42548shr kb, in 230usr/10sys/269real ms.
Pass 4: compiled C into "simple.ko" in 3820usr/790sys/4619real ms.
Pass 5: starting run.
Pass 5: run completed in 20usr/50sys/97real ms.
</code></pre>

<p>simple.ko が生成されるので、これを実行したいマシンにコピーする。そのマシン上では、systemtap-runtime パッケージがインストールされていれば良い。で、以下のように staprun コマンドを叩いてモジュールを実行する。</p>

<pre><code>$ staprun simple.ko -v
stapio:cleanup_and_exit:400 detach=0
stapio:cleanup_and_exit:417 closing control channel
staprun:remove_module:205 Module simple removed.
</code></pre>

<p>これも root 権限が必要だけど、stapusr グループに属していれば権限は必要ない。（stapdev グループでももちろん実行できる。）</p>

<ul>
<li>参考 URL

<ul>
<li>http://sourceware.org/systemtap/SystemTap_Beginners_Guide/cross-compiling.html</li>
</ul>
</li>
</ul>


<p>今日はここまで。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/07/03/LargeServiceTechnologyIntroBook/">Large Service Technology Intro Book</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-07-03T23:07:01+09:00" pubdate>Jul 3<span>rd</span>, 2010</time>
        
         | <a href="/blog/2010/07/03/LargeServiceTechnologyIntroBook/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>!html</h1>

<pre><code>&lt;a href="http://www.amazon.co.jp/dp/4774143073"&gt;&lt;img src="http://ec3.images-amazon.com/images/I/51GW5jxmdvL._SL500_AA300_.jpg" /&gt;&lt;/a&gt;
</code></pre>

<p><a href="http://www.amazon.co.jp/dp/4774143073">Web開発者のための大規模サービス技術入門 —データ構造、メモリ、OS、DB、サーバ/インフラ</a> という本を献本頂きました。<a href="http://gihyo.jp/">技術評論社様</a>、<a href="http://twitter.com/naoya_ito">@naoya_ito</a> さん、<a href="http://twitter.com/stanaka">@stanaka</a> さん、ありがとうございます。</p>

<p>目次の詳細は<a href="http://gihyo.jp/magazine/wdpress/plus/978-4-7741-4307-1">技術評論社様のサイト</a>をご覧頂くとして、アウトラインは以下のようになっています。</p>

<hr />

<ul>
<li>第1回　大規模Webサービスの開発オリエンテーション―全体像を把握する

<ul>
<li>Lesson 0　本書の源 ―本書で説明すること，しないこと</li>
<li>Lesson 1　大規模なサービスと小規模なサービス</li>
<li>Lesson 2　成長し続けるサービスと，大規模化の壁</li>
<li>Lesson 3　サービス開発の現場</li>
</ul>
</li>
<li>第2回　大規模データ処理入門 ―メモリとディスク，Webアプリケーションと負荷

<ul>
<li>Lesson 4　はてなブックマークのデータ規模 ―データが大きいと処理に時間がかかる</li>
<li>Lesson 5 大規模データ処理の難所 ―メモリとディスク</li>
<li>Lesson 6　スケーリングの要所</li>
<li>Lesson 7　大規模データを扱うための基礎知識</li>
</ul>
</li>
<li>第3回　OSのキャッシュと分散 ―大きなデータを効率良く扱うしくみ

<ul>
<li>Lesson 8　OSのキャッシュ機構</li>
<li>Lesson 9　I/O負荷の軽減策</li>
<li>Lesson 10　局所性を活かす分散</li>
</ul>
</li>
<li>第4回　DBのスケールアウト戦略 ―分散を考慮したMySQLの運用

<ul>
<li>Lesson 11　インデックスを正しく運用する ―分散を考慮したMySQL運用の大前提</li>
<li>Lesson 12　MySQLの分散 ―スケーリング前提のシステム設計</li>
<li>Lesson 13　MySQLのスケールアウトとパーティショニング</li>
</ul>
</li>
<li>第5回　大規模データ処理［実践］入門 ―アプリケーション開発の勘所

<ul>
<li>Lesson 14　用途特化型インデクシング ―大規模データを捌く</li>
<li>Lesson 15　理論と実践の両側から取り組む</li>
</ul>
</li>
<li>第6回　［課題］圧縮プログラミング ―データサイズ，I/O高速化との関係を意識する

<ul>
<li>Lesson 16　［課題］整数データをコンパクトに持つ</li>
<li>Lesson 17　VB Codeと速度感覚</li>
<li>Lesson 18　課題の詳細と回答例</li>
</ul>
</li>
<li>第7回　アルゴリズムの実用化 ―身近な例で見る理論・研究の実践投入

<ul>
<li>Lesson 19　アルゴリズムと評価</li>
<li>Lesson 20　はてなダイアリーのキーワードリンク</li>
<li>Lesson 21　はてなブックマークの記事カテゴライズ</li>
</ul>
</li>
<li>第8回　［課題］はてなキーワードリンクの実装 ―応用への道筋を知る

<ul>
<li>Lesson 22　［課題］はてなキーワードリンクを作る</li>
<li>Lesson 23　回答例と考え方</li>
</ul>
</li>
<li>第9回　全文検索技術に挑戦 ―大規模データ処理のノウハウ満載

<ul>
<li>Lesson 24　全文検索技術の応用範囲</li>
<li>Lesson 25　検索システムのアーキテクチャ</li>
<li>Lesson 26　検索エンジンの内部構造</li>
</ul>
</li>
<li>第10回　［課題］全文検索エンジンの作成 ―基本部分，作り込み，速度と精度の追求

<ul>
<li>Lesson 27　［課題］はてなブックマーク全文検索を作る</li>
<li>Lesson 28　回答例と考え方</li>
</ul>
</li>
<li>第11回　大規模データ処理を支えるサーバ/インフラ入門 ―Webサービスのバックエンド

<ul>
<li>Lesson 29　エンタープライズ vs. Webサービス</li>
<li>Lesson 30　クラウドvs.自前インフラ</li>
</ul>
</li>
<li>第12回　スケーラビリティの確保に必要な考え方 ―規模の増大とシステムの拡張

<ul>
<li>Lesson 31　レイヤとスケーラビリティ</li>
<li>Lesson 32　負荷の把握，チューニング</li>
</ul>
</li>
<li>第13回　冗長性の確保，システムの安定化 ―ほぼ100％の稼動率を実現するしくみ

<ul>
<li>Lesson 33　冗長性の確保</li>
<li>Lesson 34　システムの安定化</li>
<li>Lesson 35　システムの安定化対策</li>
</ul>
</li>
<li>第14回　効率向上作戦 ―ハードウェアのリソースの使用率を上げる

<ul>
<li>Lesson 36　仮想化技術</li>
<li>Lesson 37　ハードウェアと効率向上 ―低コストを実現する要素技術</li>
</ul>
</li>
<li>第15回　Webサービスとネットワーク ―ネットワークで見えてくるサービスの成長

<ul>
<li>Lesson 38　ネットワークの分岐点</li>
<li>Lesson 39　さらなる上限へ</li>
</ul>
</li>
<li>特別編　いまどきのWebサービス構築に求められる実践技術 ―大規模サービスに対応するために

<ul>
<li>Special Lesson 1　ジョブキューシステム ―TheSchwartz､ Gearman</li>
<li>Special Lesson 2　ストレージの選択 ―RDBMSかkey-valueストアか</li>
<li>Special Lesson 3　キャッシュシステム ―Squid，Varnish</li>
<li>Special Lesson 4　計算クラスタ ―Hadoop</li>
</ul>
</li>
</ul>


<hr />

<p>ものすごいボリュームです。はてなさんで毎年行っているインターンシップのカリキュラムを書籍化したそうで、ペパボでは最近新卒採用を開始したんですが、これは新人教育用の教科書としても使えそうです。</p>

<p>特に、はてなさんで苦労した内容なんかもふんだんに盛り込まれており、理論だけに偏らず、具体的にどういったことで苦労して、それをどう克服しかた、という実践的な話はとても興味深く読ませて頂きました。こういう話ってなかなか書籍では出てこないんじゃないかと思います。</p>

<p><a href="http://www.amazon.co.jp/dp/4774135666">「24時間365日 サーバ/インフラを支える技術 — スケーラビリティ、ハイパフォーマンス、省力運用」</a> も、発売当時にペパボ内の技術者に、これは読んでおけと勧めたのですが、本書もやはり読むように勧めたいと思います。</p>

<hr />

<p>併せて読みたい</p>

<ul>
<li><a href="http://d.hatena.ne.jp/naoya/20100701/1277955080">著者の naoya さんのブログエントリ</a></li>
<li><a href="http://d.hatena.ne.jp/hirose31/20100702/1278057502">hirose31 さんのブログエントリ</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/06/27/ZabbixBook/">Zabbix Book</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-06-27T01:43:55+09:00" pubdate>Jun 27<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/06/27/ZabbixBook/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>!html</h1>

<pre><code>&lt;a href="http://www.amazon.co.jp/dp/4774142131"&gt;&lt;img src="http://ec2.images-amazon.com/images/I/51muk-EBA-L._SL500_AA300_.jpg" /&gt;&lt;/a&gt;
</code></pre>

<p>技術評論社様よりご献本頂いてたのですが、感想を書くのがすっかり遅くなってしまいました。</p>

<p>タイトルの通り、統合監視ソフトウェア Zabbix について書かれた本です。和書では初の Zabbix 本ですね。（ですよね？）Software Design plus シリーズの第1弾ということで、今後のシリーズ展開がとても楽しみです。</p>

<p>本書の目次は以下のようになっています。</p>

<ul>
<li>はじめに</li>
<li>1章: 統合監視ソフトウェアZabbixとは</li>
<li>2章: Zabbixのインストール</li>
<li>3章: クイックスタートガイド</li>
<li>4章: 監視対象と監視項目の設定</li>
<li>5章: 障害検知と障害通知の設定</li>
<li>6章: グラフィカル表示の設定</li>
<li>7章: テンプレートの利用とエクスポート/インポート</li>
<li>8章: 一般設定とユーザ設定</li>
<li>9章: Zabbixによるシステム監視サーバ構築実践</li>
<li>10章: 障害発生時のスクリプト実行機能の活用</li>
<li>11章: アプリケーションの詳細監視</li>
<li>12章: Zabbixサーバの運用とメンテナンス</li>
<li>13章: 大規模システムの監視</li>
<li>14章: Appendix</li>
</ul>


<p>そもそも監視とは何か、といった話から、Zabbix の概要、インストール、設定、運用、大規模システムの監視と、Zabbix を知り実際に利用するために必要な知識がほとんど網羅されているのではないかと思います。Zabbix は機能豊富で全体像がすぐには掴みにくいソフトウェアなので、こういった形で一冊の本にまとまっているのは非常にありがたいですね。</p>

<p>Zabbix で特にいいなー、と思ったのは、リソースグラフの表示範囲や日時を自由に変更できるところ。自分が使ったことがあるリソースモニタリングツールだと、直近のデータ1時間分、といった表示はできても、過去のある時点の詳細を見たいと思った場合に、その時点のデータは1時間分ではなく、1日分や1週間分といった非常に大雑把なデータになってしまい、こちらが望む細かい粒度でのリソース動向を追うことができないという不満があるけれど、Zabbix であればこちらが望む形でリソースグラフを確認することができそうです。<a href="http://www.zabbix.jp/modules/bwiki/index.php?zabbixdemo">デモサイト</a> でもこの辺については確認できます。</p>

<p>逆に Zabbix のあまり好きではない点は、機能が豊富すぎるところ。稼働監視、リソース監視、アプリケーション監視をすべて網羅していて、オールインワンなソフトウェアを求めている人にはとてもいいソリューションだけれども、既に Nagios のような稼働監視ソフトウェアを利用していて、そこにリソース監視ソフトウェアを導入したいとか、あるいはその逆パターンとか、そういった場合には、既存で導入しているソフトウェアと機能が被る面が多いので導入しづらいかな、という懸念があります。</p>

<p>また、自分は目的特化した小さなソフトウェアを組み合わせて必要に応じてカスタマイズするのが好きなので、Zabbix のような大きなソフトウェアの導入はためらってしまいますね。</p>

<p>とは言っても、本書を読んで Zabbix は非常によくできたソフトウェアだと思いましたので、統合監視ソフトウェアの導入を検討している方にはとても参考になると思います。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/05/20/DevOpsPresentationSlide/">Dev Ops Presentation Slide</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-05-20T14:14:35+09:00" pubdate>May 20<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/05/20/DevOpsPresentationSlide/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://twitter.com/daiba/status/12491343137">ドクターペッパー飲み放題</a>に釣られて、NTTレゾナントさんで DevOps の話をしてきました。</p>

<p><a href="http://www.slideshare.net/mizzy/devops-4156440">プレゼン資料をslideshareにあげておきます</a>。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/04/14/HadoopAndScalaPackagesForCentOS/">Hadoop And Scala Packages For Cent Os</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-04-14T14:53:27+09:00" pubdate>Apr 14<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/04/14/HadoopAndScalaPackagesForCentOS/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>2010/04/14 追記</em></p>

<p>太田さんから twitter で<a href="http://twitter.com/kzk_mover/status/12147992526">Hadoopは基本的にSun JDKのみでテストされているので、OpenJDKでの使用は危険らしいです。</a> とご指摘いただきました。ありがとうございます。</p>

<p>となると、Hadoop 以外にも Java 関連パッケージを利用したい場合には、Hadoop を OpenJDK 用にビルドするんじゃなくて、他の Java 関連パッケージを Sun JDK 用にビルドしなおすか、気持ち悪いけど併用するか、のどちらかになってしまうんですかね。</p>

<hr />

<p>Hadoop を CentOS5 で利用する場合、<a href="http://www.cloudera.com/hadoop/">Cloudera’s Distribution for Hadoop (CDH)</a> を <a href="http://archive.cloudera.com/docs/_yum.html">yum でインストール</a> するのが簡単なんですが、http://java.sun.com/ から入手できる JDK パッケージに依存してるので、CentOS5で yum install できる OpenJDK パッケージ が使えません。</p>

<p>Hadoop 使うだけならそれでもいいんですが、他の yum で入る ant 等の Java 製ソフトウェアを利用しようと思うと、Sun から入手した JDK パッケージと yum で入る OpenJDK パッケージが同居して、気持ちが悪いです。</p>

<p>幸い、<a href="http://archive.cloudera.com/redhat/cdh/3/SRPMS/">CDH の SRPM</a> も入手できるので、こいつを OpenJDK パッケージを利用する形でパッケージングしなおしました。</p>

<ul>
<li>http://svn.mizzy.org/public/yum/SRPMS/hadoop-0.20-0.20.2+228-1.centos.src.rpm</li>
</ul>


<p>こいつをビルドするために ant 1.7 以降が必要なのだけど、CentOS で yum で入るのは 1.6 なので、ant 1.7 のパッケージもつくった。</p>

<ul>
<li>http://svn.mizzy.org/public/yum/SRPMS/ant-1.7.1-11.1.src.rpm</li>
</ul>


<p>また、Hadoop + Scala を試してみたいので、Scala のパッケージと、Scala に必要な jline のパッケージもつくった。</p>

<ul>
<li>http://svn.mizzy.org/public/yum/SRPMS/scala-2.7.7-1.centos.src.rpm</li>
<li>http://svn.mizzy.org/public/yum/SRPMS/jline-0.9.94-0.6.src.rpm</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/26/OpenSourceProvisioningToolchain/">Open Source Provisioning Toolchain</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-03-26T00:40:19+09:00" pubdate>Mar 26<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/03/26/OpenSourceProvisioningToolchain/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>DevOps に関する理解を深めるために、資料にあたってまとめてみるシリーズ。</p>

<p>今回は <a href="http://en.oreilly.com/velocity-mar2010">Velocity Online Conference - March 17, 2010</a> でのプレゼン <a href="http://en.oreilly.com/velocity-mar2010/public/schedule/detail/14180">Provisioning Toolchain</a> から。スライドのタイトルは「OpenSource Provisioning Toolchain」となっている。</p>

<p>[wiki:DevOps 昨日のエントリ]でいうと、「インフラの自動化」や「ワンステップビルド＆デプロイ」に関連する話。</p>

<p>Toolchain というのは何らかの目的を達成するためのソフトウェアの集まり、ってことなので、Provisioning Toolchain は、プロビジョニングを行うためのソフトウェアの集まり、ってことですね。つまり OpenSource Provisioning Toolchain は、プロビジョニングを行うためのオープンソースソフトウェアの集まり、ということ。</p>

<p>ここでわざわざ Toolchain といってるのは、ひとつの大きなソフトウェアで全部やるんじゃなくて、小さなソフトウェアを組み合わせることで、プロビジョニング全体をカバーしよう、という考えから。</p>

<p>小さなツールを組み合わせることによるメリットを、UNIX哲学的な話と絡めて説明してるけど、この辺はよくある話なので省略。</p>

<p>また、なぜこのような Toolchain が必要なのか、って話を、クラウドや仮想化の波が押し寄せてきて DevOps 問題が発生する云々、的なスライドがあるんだけど、それ以上の詳しい説明が特にないのでこれも省略。</p>

<p>個人的に参考になったのは、プロビジョニングを3つの領域にわけて、それぞれの領域に対応するオープンソースソフトウェアを挙げているところ。（オープンソースじゃないモノも混じってるけど。）</p>

<p>3つの領域とは以下の通り。</p>

<ul>
<li>Orchestration

<ul>
<li>Application Service Deployment</li>
</ul>
</li>
<li>Configuration

<ul>
<li>System Configuration</li>
</ul>
</li>
<li>Bootstrapping

<ul>
<li>OS install</li>
<li>Cloud or VM Image Launch</li>
</ul>
</li>
</ul>


<p>下の方がプロビジョニングの初期段階で、上に行くほどレイヤーが上がるイメージ。</p>

<p>で、それぞれに対応するソフトウェアは以下の通り。</p>

<ul>
<li>Orchestration

<ul>
<li><a href="http://www.capify.org/index.php/Capistrano">Capistrano</a></li>
<li><a href="http://controltier.org/wiki/Main_Page">ControlTier</a></li>
<li><a href="http://docs.fabfile.org/">Fabric</a></li>
<li><a href="https://fedorahosted.org/func/">Func</a></li>
</ul>
</li>
<li>Configuration

<ul>
<li><a href="http://trac.mcs.anl.gov/projects/bcfg2">BCFG</a></li>
<li><a href="http://www.cfengine.org/">Cfengine</a></li>
<li><a href="http://www.opscode.com/chef">Chef</a></li>
<li><a href="http://www.puppetlabs.com/">Puppet</a></li>
<li><a href="http://wiki.smartfrog.org/wiki/display/sf/SmartFrog+Home">SmartFrog</a></li>
</ul>
</li>
<li>Bootstrapping

<ul>
<li><a href="http://aws.amazon.com/">AWS</a></li>
<li><a href="https://fedorahosted.org/cobbler/">Cobbler</a></li>
<li><a href="http://www.eucalyptus.com/">Eucalyptus</a></li>
<li><a href="http://en.wikipedia.org/wiki/Jumpstart_%28Solaris%29">Jumpstart</a></li>
<li><a href="http://fedoraproject.org/wiki/Anaconda/Kickstart">Kickstart</a></li>
<li><a href="http://www.opennebula.org/start">OpenNebula</a></li>
<li><a href="http://www.openqrm.com/">OpenQRM</a></li>
<li><a href="http://www.vmware.com/">VMWare</a></li>
</ul>
</li>
</ul>


<p>ペパボの場合だと、全部のサービスがそうというわけではないけど、Bootstrapping レイヤーで Cobbler、Configuration レイヤーで Puppet、Orchestration レイヤーで Capistrano(Webistrano) や Func、といった感じ。ここにないものだと、Orchestration レイヤーで Archer なんかも使ってる。</p>

<p>今日は手抜きだけどこれでお終い。これから <a href="http://www.jp.playstation.com/scej/title/mag/">MAG</a> やるので。DLC第1弾トルーパーパックが配信されたしね。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/25/DevOps/">Dev Ops</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-03-25T10:18:35+09:00" pubdate>Mar 25<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/03/25/DevOps/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.agileweboperations.com/devops-why-silos-suck-and-how-to-break-them/">DevOps: Why Silos Suck And How To Break Them</a> というエントリをたまたま目にして、「DevOps」という見なれない言葉が出てきたので、気になって調べてみたところ、自分が何となくやっていたことや、今までもやもやと考えていたことに一定の方向性が与えらえた気がしたので、整理してみることにします。</p>

<hr />

<h1>DevOps とは？</h1>

<p>簡単に言ってしまうと<em>「開発者と運用者の間の壁を取り払うためのベストプラクティス」</em>と言えそうです。</p>

<hr />

<h1>開発者と運用者の間の壁？</h1>

<p>Flickr の中の人による <a href="http://www.slideshare.net/jallspaw/10-deploys-per-day-dev-and-ops-cooperation-at-flickr">10+ Deploys Per Day: Dev and Ops Cooperation at Flickr</a> という Velocity 2009 でのプレゼンスライドには「Devs versus Ops」という章があり、以下のような言葉が載っていました。</p>

<p>  &#8220;It&#8217;s not my machines, it&#8217;s your code!&#8221;</p>

<p>「それは俺のマシンじゃないし、お前のコードだろ」って感じでしょうか。実際、開発者と運用者が明確に分かれている組織では、多かれ少なかれ、また、ニュアンスや詳細は違うでしょうが、こういった言葉が交わされることがあるのではないでしょうか。これは開発者と運用者だけではなく、ウェブ開発者とサーバエンジニア、フロントエンジニアとバックエンドエンジニア、といった形で、明確に役割分担されている組織では起こりうる問題であり、これにより開発がスケジュールから大幅に遅れたり、トラブルがなかなか解決しない、といったような事態を招くこともあるんじゃないかと思います。</p>

<p>また、上記スライドでは以下のような考えを「伝統的な考え」と述べています。</p>

<ul>
<li>開発者の仕事は新しい機能を追加すること</li>
<li>運用者の仕事はサイトを速くて安定した状態に保つこと</li>
</ul>


<p>そして、「運用者の仕事はサイトを速くて安定した状態に保つこと<em>ではない<em>&#8216;」とし、「ビジネスには変化が必要」であり、&#8221;&#8217;「安定性をとって変化を捨てる」&#8221;&#8217;か&#8217;</em>「必要に応じて変化が起こることを許容する」</em>か、といった選択肢を提示しています。</p>

<hr />

<h1>どうやってその壁を取り除くのか</h1>

<p>では、このような開発者と運用者（あるいはウェブ開発者とサーバエンジニアなど、自身の置かれた状況に置き変えてみてください）の壁を取り払うためには、どうすればいいのでしょうか。上で見たように、壁の原因は<em>「運用者の仕事はサイトを速くて安定した状態に保つこと」<em>&#8216;という伝統的な考えにありそうです。（これは別に運用者が悪い、と言っているわけではありません。）そして、提示された選択肢のうちの後者&#8217;</em>「必要に応じて変化が起こることを許容する」</em>ことが容易に実現できるようにすることが大事なのではないかと考えられます。これを実現するために重要なことは、</p>

<ul>
<li>ツール</li>
<li>文化</li>
</ul>


<p>の2つに分けることができそうです。</p>

<hr />

<h1>ツール</h1>

<p>「10+ Deploys Per Day: Dev and Ops Cooperation at Flick」では、ツールとして以下のようなものをあげています。</p>

<ul>
<li>インフラの自動化</li>
<li>共有されたバージョンコントロール</li>
<li>ワンステップビルド＆デプロイ</li>
<li>機能フラグ</li>
<li>メトリックの共有</li>
<li>IRC and IM robots</li>
</ul>


<p>ひとつひとつの解説は省略しますが、いずれも状態やその変化を記録、可視化し、変更しやすい、あるいは変更をコントロールしやすい環境をつくるためのツール、と言えそうです。</p>

<hr />

<h1>文化</h1>

<p>また、文化としては以下のような項目を挙げています。</p>

<ul>
<li>尊敬</li>
<li>信頼</li>
<li>失敗を許容する</li>
<li>責めない</li>
</ul>


<p>まあこれは、人と協調して仕事をスムーズに進めるためにはどれも重要なことですよね。</p>

<hr />

<p>以上が DevOps について、自分なりに得たことのまとめです。ツールについては、自分がペパボに入社してから導入や利用促進してきたもの、これから導入したいと思っているものなんかが、軒並み上のリストに含まれていて、DevOps の概念が頭にあったわけではないんですが、思いがけずそういう方向に行こうとしていたんだな、ということがこの言葉に出会うことによって確認できました。（それでエントリのタイトルがあんな感じになってます。）</p>

<p>DevOps 自体まだ定義として固まっているものではないようですし、かなり端折った形でまとめましたので、興味がある方は自分が参考にした以下のURLや、更にそこからのリンクを辿ってみてください。</p>

<ul>
<li>参考URL

<ul>
<li>http://www.agileweboperations.com/devops-why-silos-suck-and-how-to-break-them/</li>
<li>http://dev2ops.org/blog/2010/2/22/what-is-devops.html</li>
<li>http://code.google.com/p/devops-toolchain/</li>
<li>http://www.slideshare.net/jallspaw/10-deploys-per-day-dev-and-ops-cooperation-at-flickr</li>
</ul>
</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/03/20/KindleJapaneseTitle/">Kindle Japanese Title</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-03-20T19:04:33+09:00" pubdate>Mar 20<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/03/20/KindleJapaneseTitle/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Kindle Store で樋口一葉、芥川龍之介、夏目漱石らの日本語書籍が出てたのは以前から知っていたのですが、最近 <a href="http://www.atpress.ne.jp/view/14142">Amazon Kindleで日本語のコンテンツが読める！ 日本語電子書籍「想隆社文庫」創刊！一般向けおよび図書館向けに提供を開始</a> といったプレスリリースが出てたので、どんなものか確認するために、実際に購入してみました。</p>

<p>結論から言うと、「6インチ Kindle 上では薄くて読みづらい。お金出して買う価値なし。今出てるタイトルなら、青空キンドルを使っとけ。」といったところでしょうか。</p>

<hr />

<p>以前から出てた日本語タイトルのスクリーンショット。</p>

<p>[[Image(http://mizzy.org/img/kindle/kokoro.gif, 25%)]]</p>

<hr />

<p>最近プレスリリースが出ていた、「これまでの電子書籍と異なり、従来の紙の本好きが違和感なく読めることを重視。書籍DTPを行う職人による組版を採用し、版面の美しさを追求しました。」と謳われているもののスクリーンショット。</p>

<p>[[Image(http://mizzy.org/img/kindle/sumidagawa.gif, 25%)]]</p>

<hr />

<p>青空キンドルのスクリーンショット。</p>

<p>[[Image(http://mizzy.org/img/kindle/bottyan02.gif, 25%)]]</p>

<hr />

<p>自分でスキャンしたもののスクリーンショット。</p>

<p>[[Image(http://mizzy.org/img/kindle/mahjong03.gif, 25%)]]</p>

<hr />

<p>こうして比較してみると、青空キンドルが神すぎる。また、自分でスキャンしたものは文字サイズが小さいけど、濃さ的には上2つよりも読みやすい。実際、Kindle実機上だと上2つは、スクリーンショットのものよりも更に薄くて読みづらい。</p>

<p>どうやら上2つの Kindle Store で手に入る日本語タイトルは、すべて画像データの模様。（ちなみに、Kindle の azw フォーマットは、Mobipocket フォーマットをベースにしていて、文字データは HTML で記述する。）フォントの関係で、画像になっちゃうのはしかたないのかもしれないけど、文字サイズ変更もできないし、テキスト読み上げもできないし、その上読みづらい、といった感じで、Kindle 版を購入するメリットがまったくない。</p>

<p>発売されている（またはこれから発売予定の）タイトルも、すべて青空文庫で手に入るタイトルばかりのようなので、現段階なら青空キンドルを利用するのがベスト。</p>

<p>DX の方だともう少し読みやすかったりするのかもしれないけど、小説の類はDXで読むメリットはあまりないと思う。</p>

<hr />

<p>ちなみに、実際にファイルを展開してみたら、やはり全部画像ファイルでした。ファイルの展開は Perl の EBook::Tools モジュールを利用すると簡単にできます。</p>

<pre><code>$ perl -MEBook::Tools::Unpack \
 -e 'EBook::Tools::Unpack-&gt;new(
 file =&gt; "Natsume Soseki Story Selection v-asin_B00300H6UY-type_EBOK-v_0.azw"
 )-&gt;unpack'
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/02/24/PuppetAtHbStudy8/">Puppet At Hb Study8</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2010-02-24T23:43:33+09:00" pubdate>Feb 24<span>th</span>, 2010</time>
        
         | <a href="/blog/2010/02/24/PuppetAtHbStudy8/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://heartbeats.jp/hbstudy/2010/02/hbstudy8.html">hbstudy#8</a> で、「Puppet のススメ」というタイトルでプレゼンさせていただきました。機会をくださった<a href="http://heartbeats.jp/">株式会社ハートビーツ</a>の藤崎さん、馬場さん、坂口さん、また、運営スタッフのみなさま、聞きに来て下さったみなさま、twitter やブログで感想述べてくださったみなさま、本当にありがとうございました。</p>

<p>当日の資料は <a href="http://www.slideshare.net/mizzy/puppet-3258268">slideshare にアップしています</a>。</p>

<p>内容は主に Puppet を知らない方、これから使ってみようかどうか検討している方をターゲットとして、</p>

<ul>
<li>Puppet とはどんなものか</li>
<li>どんな風に動かすのか</li>
<li>どういった使い方をすればいいのか</li>
<li>使うために知っておいた方がいいこと</li>
<li>使ってみて微妙だなと思うところ</li>
</ul>


<p>といったお話をさせて頂きました。Puppet を既に実運用でバリバリ使っている方には、特に目新しい話はなかったと思いますが、そういった方からは逆にこちらが知らないこと、見落としてること、間違ってることなんかの情報をもらえればいいなー、という思いでプレゼンさせていただきました。</p>

<p>これだけではなんなので、プレゼンの補足事項とか、twitter のハッシュタグ #hbstudy やブログなんかで色々コメント頂いてますので、その辺まとめてみようと思います。</p>

<p>まずは twitter からいくつかピっくアップしてみます。</p>

<p>  matsuu puppetの気づきにくいメリットの１つは、puppetをいつでもやめられること。puppetをやめても既存の設定はpuppetに依存しないのでいつでもやめられる。これ大きいよね。 http://twitter.com/matsuu/statuses/9521601261</p>

<p>これは確かにおっしゃる通りですね。Puppet でサーバ構築しても、できあがったものは特に Puppet に縛られるものではないので、いつ使うのやめても大丈夫です。そして、プレゼンでも触れましたが、単に動かしてみるだけなら、比較的さくっと試せます。使いはじめる、あるいは使うのをやめる敷居が低い、というのは良いツールの条件だと思いますので、これはとても大きいメリットですね。</p>

<p>  yuzorock puppetの気付きにくいメリットの1つはsshではないこと。 http://twitter.com/yuzorock/statuses/9521698444</p>

<p>おっしゃる通り、メリットでもあると思うのですが、<a href="http://d.hatena.ne.jp/tokuhirom/20100224/1266979391">sshd で代用できたらいいのに</a> という意見もあったりで、ここはなかなか難しい問題だなー、と思います。SSH ではないことは、メリットでもあるしデメリットでもありそうですね。メリットとしては、SSH 経由でマニフェストを適用するとなると、そのためのユーザ管理や鍵の管理、sudo まわりの設定、といったものが必要になるけど、そういった手間がかからない、といったところでしょうか。（他にもあれば教えて下さい。）逆にデメリットとしては、デーモンが常時上がってるとメモリ食うし、常にあがってる必要がないものがあがってる、という気持ち悪さ、といったあたりですかね。とくに、運用監視系のツールを色々入れていて、それぞれがデーモン持ってる、という状態はあまり好ましくないのではないかと思います。</p>

<p>  xaicron manifest の学習コストはどうなんだろ http://twitter.com/xaicron/statuses/9521881525</p>

<p>  yuzorock manifestの学習コストはたいしたこと無い。コマンド打つのとやることは同じだから。 http://twitter.com/yuzorock/statuses/9521927420</p>

<p>ここは感じ方は人それぞれだと思うので、一般的に学習コストがどうなのかを言うのは難しいのですが、自分は yuzorock さんと同意見で、それほど学習コスト高くないと思っています。</p>

<p>  matsuu #hbstudy puppetでcron設定管理してるとcrontabがどんどん汚れていくんだぜ&#8230;gentooだけかも http://twitter.com/matsuu/statuses/9522038117</p>

<p>最近はマニフェストで cron リソース定義するよりも、file リソースで /etc/cron.d にファイル置く方がわかりやすいかな、と思ったりしてます。</p>

<p>  matsuu あ、puppetのテンプレートの機能の話でてきた？ http://twitter.com/matsuu/statuses/9522545344</p>

<p>すみません、忘れてました！話したいことが多すぎて…テンプレートについて詳しく知りたい方は、 http://gihyo.jp/admin/serial/01/puppet/0007 とか Software Design の記事なんかをご覧ください。</p>

<p>  hirose31 なにげに PSP がリモコン http://twitter.com/hirose31/statuses/9522592495</p>

<p><a href="http://coderepos.org/share/wiki/PSPSlidePanel">スライド操作パネル for PSP</a> つかってます！これは超便利です。スライドの進行状況と残り時間がわかりやすく視覚化されるので、話しながら時間調整ができます。（Puppet関係ないですね。）</p>

<p>  mkouhei うーむ、良い点よりも不満の方が多いように聞こえる。 http://twitter.com/mkouhei/statuses/9522637899</p>

<p>デメリットに触れているような文章はあまり見かけないので、敢えて不満点を色々上げてみましたが、こっちの方が目立っちゃいましたかね。自分としてはとても良いツールだと思っています。</p>

<p>次はブログから拾ってみます。</p>

<p><a href="http://d.hatena.ne.jp/tokuhirom/20100224/1266979391">tokuhirom さんのブログ</a>。tokuhirom さんの感想を見て思ったのは、Puppet を導入してメリットがあるかどうか、というのは、どういう状況に置かれてるのか、どういったことをツールで解決したいのか、に大きく依存するので、それ抜きでは語れないな、と。Puppet に限った話でもないし、当り前のことなのですが、再確認させていただきました。</p>

<p>これと併せて <a href="http://www.sssg.org/blogs/naoya/archives/1717">n0ts さんのブログ</a> を読んでみると、やはり重要なのは、「いかに楽をするか」だよね、と。n0ts さんの意見にとても賛成です。でも、置かれてる状況や人によって、「どこで楽をするのか」は異なってきそうですね。tokuhirom さんの感想にある、</p>

<p>  「シェルスクリプトで構築すればこれ簡単なのに!」みたいな場合に、いちいち puppet rule 書くのダルくね?</p>

<p>も、構築を自動化する、というポイントに置いて楽をしたいのであれば、シェルスクリプトでやっちゃうのが楽だと思います。そこを少し視線を変えて、構築シェルスクリプトはずっとメンテし続ける必要があるし、かといって作成した人がずっとメンテできるわけではないし、ずっとメンテできるとしても、長年メンテしつづけて作成した人にとってもカオスになることもあり得る、という状況が考えられる場合には、Puppet も選択肢のひとつとして検討に値する、といったことになるのではないかと。これはまさに、tokuhirom さんの感想にある</p>

<p>  自由度を制限して、属人性を排除するというアプローチはアリだとおもう。</p>

<p>の通り、属人性を排除する、ということを考えると、Puppet は有力な選択肢になる、という例だと思います。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/6/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/4/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/03/07/exif-tag-plugin/">EXIF tag plugin</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/04/rakuten-tag-plugin/">Rakuten tag plugin for Jekyll</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/02/29/paperboys-engineer-evaluation-system/">Paperboy&#8217;s engineer evaluation system</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/17/paperboy-is-hiring/">paperboy is hiring</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/13/coderwall-badges-on-the-sidebar/">coderwall badges on the sidebar</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Coderwall</h1>
  <p>
  <script type="text/javascript">
    function display_coderwall(args) {
        var badges = args["data"]["badges"];
        for ( var i = 0; i < badges.length; i++ ) {
            document.write('<img src="'+ badges[i]["badge"] + '" width="48" height="48" />');
        }
    }
  </script>
  <script src="http://coderwall.com/mizzy.json?callback=display_coderwall"></script>
  </p>
  <p style="text-align: right;"><a href="http://coderwall.com/mizzy">Powered by coderwall.com</a></p>
</section>


<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/mizzy">@mizzy</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mizzy',
            count: 30,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Gosuke Miyashita -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mizzyorg';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
