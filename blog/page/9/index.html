
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>mizzy.org</title>
  <meta name="author" content="Gosuke Miyashita">

  
  <meta name="description" content="30days Album の インフォメーションブログ に、30days Album を支える技術 #0 ～ サーバ構成概要 というエントリをポストしました。 今回は全体的なサーバ構成の概要について書いています。今後、各コンポーネント毎に、実際に担当した技術スタッフとともに、 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mizzy.github.com/blog/page/9">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="mizzy.org" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-53984-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">mizzy.org</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mizzy.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/06/05/Inside30daysAlbumsBackEnd/">Inside30daysAlbumsBackEnd</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-06-05T10:52:38+09:00" pubdate>Jun 5<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/06/05/Inside30daysAlbumsBackEnd/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://30d.jp/">30days Album</a> の <a href="http://30d.jugem.jp/">インフォメーションブログ</a> に、<a href="http://30d.jugem.jp/?eid=13">30days Album を支える技術 #0 ～ サーバ構成概要</a> というエントリをポストしました。</p>

<p>今回は全体的なサーバ構成の概要について書いています。今後、各コンポーネント毎に、実際に担当した技術スタッフとともに、詳細掘り下げて解説していく予定です。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/05/16/YapcAsia2008TokyoPunc/">YapcAsia2008TokyoPunc</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-05-16T10:46:16+09:00" pubdate>May 16<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/05/16/YapcAsia2008TokyoPunc/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>昨日のYAPC::Asia 2008 Tokyo 初日のセッションで発表した、「Easy system administration programming with a framework - フレームワークでシステム管理プログラミングをもっと簡単に」の資料を <a href="http://www.slideshare.net/mizzy/yapcasia-2008-tokyo-easy-system-administration-programming-with-a-framework-by-gosuke-miyashita">Slide Share にアップ</a>しました。</p>

<p>今日はどうしても外せないミーティングのため、午後から YAPC 会場に向かいます。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/05/06/MooseXClassAttribute/">MooseXClassAttribute</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-05-06T13:05:43+09:00" pubdate>May 6<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/05/06/MooseXClassAttribute/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>流行に乗って <a href="http://coderepos.org/share/wiki/Punc">Punc</a> にも Moose を取り入れようと思って、MooseX::ClassAttribute でクラス属性をハンドリングできるようにしてみたのですが、子クラスのクラス属性をセットすると、親クラスのクラス属性まで変わってしまう。</p>

<pre><code>#!perl
#!/usr/bin/perl

package Parent;
use Moose;
use MooseX::ClassAttribute;

class_has 'x' =&gt; ( is =&gt; 'rw' );

package Child;
use Moose;
extends 'Parent';

package main;

Parent-&gt;x('Parent');
warn Parent-&gt;x; # Parent が表示される

Child-&gt;x('Child');
warn Parent-&gt;x; # Child が表示されてしまう
</code></pre>

<p>これが一般的に望ましい動作なのかどうかわからないので、とりあえず Class::Data::Inheritable 使うように書き直した。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/30/KlabAndFuncAndPunc/">KlabAndFuncAndPunc</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-03-30T21:28:20+09:00" pubdate>Mar 30<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/03/30/KlabAndFuncAndPunc/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://dsas.blog.klab.org/archives/51199866.html">KLab 勉強会 #4</a> で、<a href="https://fedorahosted.org/func/">Func</a> についてしゃべってきました。その時の様子は <a href="http://www.ustream.tv/channel/KLab">Ustream</a> でご覧いただけます。また資料は後日 <a href="http://dsas.blog.klab.org">DSAS 開発者の部屋</a>にアップされると思います。</p>

<p>スピーカのために壇上に水が用意されていることはよくあると思いますが、今回は僕のためにドクターペッパーが用意されているというスペシャルな待遇に感激しました。</p>

<p>で、Func についてしゃべった中で、いくつかいけてない点をあげたのですが、特に RedHat 系 Linux にしか対応してない、というところに不満もあり、また、モジュールを Perl で書きたいという思いもあり、じゃあ Perl で実装しちゃえ、ってことで、<a href="http://coderepos.org/share/wiki/Punc">Punc - Perl Unified Network Controller</a> なるものをつくりはじめました。</p>

<p>今のところプロトタイプでしかないため、まだまだ完成には程遠いですが、RedHat 系 Linux 上でサービスの起動状態を確認する、ということができるまでにはなっています。他の OS 用のモジュールを追加すれば、自動で判別して適切なモジュールを選択してくれる機能も実装しています。</p>

<p>YAPC::Asia 2008 でお話しする予定の <a href="http://conferences.yapcasia.org/ya2008/talk/973">システム管理フレームワークのアーキテクチャと Perl による実装</a> では、この Punc について詳しく解説する予定です。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/09/library-perl-trunk-FormValidator-Simple-Plugin-Number-Phone-JP-lib-FormValidator-Simple-Plugin-Number-Phone-JP.pm/">library/perl/trunk/FormValidator-Simple-Plugin-Number-Phone-JP/lib/FormValidator/Simple/Plugin/Number/Phone/JP.pm</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-03-09T12:51:35+09:00" pubdate>Mar 9<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/03/09/library-perl-trunk-FormValidator-Simple-Plugin-Number-Phone-JP-lib-FormValidator-Simple-Plugin-Number-Phone-JP.pm/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>source:library/perl/trunk/FormValidator-Simple-Plugin-Number-Phone-JP/lib/FormValidator/Simple/Plugin/Number/Phone/JP.pm</p>

<h1>NAME</h1>

<p>FormValidator::Simple::Plugin::Number::Phone::JP - Japanese phone number validation</p>

<h1>SYNOPSIS</h1>

<pre><code>  use FormValidator::Simple qw/Number::Phone::JP/;

  my $result &gt; [
      tel       =&gt; [ 'NOT_BLANK', 'NUMBER_PHONE_JP' ],
  ] );
</code></pre>

<h1>DESCRIPTION</h1>

<p>This modules adds Japanese phone number validation command to FormValidator::Simple.</p>

<h1>SEE ALSO</h1>

<p>FormValidator::Simple</p>

<p>Number::Phone::JP</p>

<h1>AUTHOR</h1>

<p>Gosuke Miyashita, <a href="&#x6d;&#97;&#105;&#108;&#x74;&#x6f;&#x3a;&#x67;&#x6f;&#115;&#117;&#107;&#x65;&#110;&#x61;&#116;&#x6f;&#x72;&#x40;&#x67;&#109;&#97;&#105;&#108;&#x2e;&#99;&#111;&#109;">&#103;&#x6f;&#115;&#x75;&#x6b;&#101;&#x6e;&#97;&#116;&#x6f;&#114;&#x40;&#x67;&#109;&#x61;&#105;&#108;&#46;&#99;&#111;&#109;</a></p>

<h1>COPYRIGHT AND LICENSE</h1>

<p>Copyright (C) 2005 by Gosuke Miyashita</p>

<p>This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl version 5.8.5 or, at your option, any later version of Perl 5 you may have available.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/03/04/oVirt00/">oVirt00</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-03-04T01:20:28+09:00" pubdate>Mar 4<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/03/04/oVirt00/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Puppet Dojo で知り合った方から、<a href="http://virt-factory.et.redhat.com/">Virt-Factory</a> はもうアクティブじゃなくなって、今は<a href="http://ovirt.org/">oVirt</a> という新しいプロジェクトに移ってる、ということをお聞きして、Virt-Factory のサイトに行ってみたら本当にそう書いてある！Xen が動かせるマシンが調達できたら、本格的に Virt-Factory 検証しよう、と思ってしばらくアクセスしてなかったら、いつの間にやらこんなことに…</p>

<p>つーわけで、Virt-Factory は捨てて oVirt の検証していくです。</p>

<p><a href="http://ovirt.org/install-instructions.html">Installing Instructions</a> を見てみると、パッケージを配布してるわけじゃなく、QEMU/KVM の仮想マシンイメージとして配布されてる模様。まずはこのイメージを動かすところまでやってみる。</p>

<p>検証環境は CentOS 5 x86_64 です。手順は上記サイトの「Installing the management appliance」の通りではあるのですが、説明があまり親切ではないし、その通りではうまくいかないところもあったので、試してみたい方は、以下の手順も合わせて参考にしてみてください。。</p>

<p>まずは VM イメージを取得。場所はどこでもいいんですが、自分は ~/vm というディレクトリを作成して、その下に置いた。</p>

<pre><code>$ mkdir ~/vm
$ cd ~/vm
$ wget http://ovirt.org/download/wui-appliance.dsk.bz2
$ bzip2 -d wui-appliance.dsk.bz2
</code></pre>

<p>次に必要なパッケージのインストール。</p>

<pre><code>$ sudo yum install libvirt qemu kvm
</code></pre>

<p>以下のような ~/vm/wui-appliance.xml を作成。</p>

<pre><code>&lt;domain type="kvm"&gt;
  &lt;name&gt;wui-appliance&lt;/name&gt;
  &lt;memory&gt;768000&lt;/memory&gt;
  &lt;currentMemory&gt;768000&lt;/currentMemory&gt;
  &lt;vcpu&gt;1&lt;/vcpu&gt;
  &lt;os&gt;
    &lt;type&gt;hvm&lt;/type&gt;
    &lt;boot dev="hd"/&gt;
  &lt;/os&gt;
  &lt;clock offset="utc"/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
  &lt;devices&gt;
    &lt;emulator&gt;/usr/bin/qemu-kvm&lt;/emulator&gt;
    &lt;disk type="file"&gt;
      &lt;source file="/home/miya/vm/wui-appliance.dsk"/&gt;
      &lt;target dev="hda"/&gt;
    &lt;/disk&gt;
    &lt;interface type="bridge"&gt;
      &lt;mac address="00:16:3e:08:97:e7"/&gt;
      &lt;source bridge="xenbr0"/&gt;
    &lt;/interface&gt;
    &lt;input type="mouse" bus="ps2"/&gt;
    &lt;graphics type="vnc" port="-1" listen="0.0.0.0"/&gt;
  &lt;/devices&gt;
&lt;/domain&gt;
</code></pre>

<p>libvirtd を起動して、virsh で qemu に接続、create でさきほどの XML ファイルを指定して VM 作成。</p>

<pre><code>$ sudo /sbin/chkconfig libvirtd on
$ sudo /etc/init.d/libvirtd start
$ sudo virsh --connect qemu:///system  
virsh #  create wui-appliance.xml
Domain wui-appliance created from wui-appliance.xml
virsh # list
 Id Name                 State
----------------------------------
  1 wui-appliance        running
</code></pre>

<p>以上で VM 起動まで完了。で、VM に SSH とかでアクセスしたいんだけど、IP アドレスがわからない！（VM の IP アドレスを外から知る方法をご存知な方は教えてください。）というわけで、virt-manager からつないでみることにする。</p>

<pre><code>$ sudo yum install virt-manager
</code></pre>

<p>virt-manager 入れたのはいいけど、CentOS は X 使えるようにしていないことに気づく。とりあえず手元の PC の cygwin に X が入ってたので、cygwin のシェルで</p>

<pre><code>$ startxwin.sh
$ xhost +
</code></pre>

<p>でもって CentOS 上で</p>

<pre><code>$ export DISPLAY=192.168.10.19:0.0
$ virt-manager
</code></pre>

<p>で virt-manager 起動。</p>

<p>[[Image(01.jpg)]]</p>

<p>無事に画面が出たので、QEMU を選択して接続。</p>

<p>[[Image(02.jpg)]]</p>

<p>VM が見えるので選択して、右下の「Open」をクリック。</p>

<p>[[Image(03.jpg)]]</p>

<p>無事アクセスできた。root のパスワードは ovirtwui 。</p>

<p>ここまでやってから、XML で MAC アドレス指定してるんだから、DHCP サーバのログから IP アドレス調べればいいだけだった、ということに気づく。</p>

<p>今日はここまで。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/02/03/YCombinatorWithPerl/">YCombinatorWithPerl</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-02-03T03:03:52+09:00" pubdate>Feb 3<span>rd</span>, 2008</time>
        
         | <a href="/blog/2008/02/03/YCombinatorWithPerl/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>計算機科学を学んでいる人にとっては今更な話題らしいですが、経済学部出身の自分には目新しい話題なので書いてみます。（といっても、全然知らなかった、というわけでもないんですが。）</p>

<p><a href="http://d.hatena.ne.jp/amachang/20080124/1201199469">id:amachang</a> さんのエントリにある最終形のみを Perl で書くとこんな感じかな。</p>

<pre><code>#!perl
my $Y = sub {
    my $f = shift;
    return sub {
        my $g = shift;
        return sub {
            my $m = shift;
            return $f-&gt;($g-&gt;($g))-&gt;($m);
        }
    }-&gt;(
        sub {
            my $g = shift;
            return sub {
                my $m = shift;
                return $f-&gt;($g-&gt;($g))-&gt;($m);
            };
        }
    )
};

my $fib = sub {
    my $f = shift;
    return sub {
        my $n = shift;
        return $n &lt;= 2 ? 1 : $f-&gt;($n - 1) + $f-&gt;($n - 2);
    };
};

warn $Y-&gt;($fib)-&gt;(10);
</code></pre>

<hr />

<p>なぜこれで再帰として動作するかを考えるにあたって、<a href="http://d.hatena.ne.jp/gotin/20080127/1201372491">id:gotin</a> さんのエントリと同内容のことを、Perl で考えてみる。</p>

<p>簡単にするために最終形の Y コンビネータになる前の中間形のコードで考える。</p>

<pre><code>#!perl
my $Y = sub {
    my $f = shift;
    my $g;
    return $g = sub {
        my $n = shift;
        $f-&gt;($g)-&gt;($n);
    }
};

my $fib = sub {
    my $f = shift;
    return sub {
        my $n = shift;
        return $n &lt;= 2 ? 1 : $f-&gt;($n - 1) + $f-&gt;($n - 2);
    }
};

warn $Y-&gt;($fib)-&gt;(5);
</code></pre>

<p>$Y->($fib) は、 my $Y = sub { &#8230; } において、$f に $fib が代入され、結果として以下の関数が返ることになる。</p>

<pre><code>#!perl
sub {
    my $n = shift;
    $fib-&gt;($g)-&gt;($n);
}
</code></pre>

<p>そうなると $Y->($fib)->(5) は、以下のように変換できる。</p>

<pre><code>#!perl
$fib-&gt;($g)-&gt;(5)
</code></pre>

<p>$fib->($g) は、my $fib = sub { &#8230; } の $f に $g が代入されるので、$fib->($g)->(5) は、</p>

<pre><code>#!perl
sub {
   my $n = shift;
   return $n &lt;= 2 ? 1 : $g-&gt;($n - 1) + $g-&gt;($n - 2);
}-&gt;(5);
</code></pre>

<p>ということになる。</p>

<p>なのでこの $n に 5 が代入され、結果として $fib->($g)->(5) は以下のように変換される。</p>

<pre><code>#!perl
  $g-&gt;(4) ... [A]
+ $g-&gt;(3) ... [B]
</code></pre>

<p>[A] を更に変換してみると、$g->(4) は $fib->($g)->(4) となり、</p>

<pre><code>#!perl
sub {
   my $n = shift;
   return $n &lt;= 2 ? 1 : $g-&gt;($n - 1) + $g-&gt;($n - 2);
}-&gt;(4);
</code></pre>

<p>を実行するのと同じ。というわけで、$g->(4) は、</p>

<pre><code>#!perl
$g-&gt;(3) + $g-&gt;(2) ... [A]
</code></pre>

<p>になる。同様に [B] を変換すると、</p>

<pre><code>#!perl
$g-&gt;(2) + $g-&gt;(1) ... [B]
</code></pre>

<p>となる。今までのところまでをまとめると、$Y->($fib)->(5) は以下のように変換される。</p>

<pre><code>#!perl
  $g-&gt;(3) + $g-&gt;(2) ... [A]
+ $g-&gt;(2) + $g-&gt;(1) ... [B]
</code></pre>

<p>で、$g->(3) は [B] の変換と同様なので、更に以下のように変換される。</p>

<pre><code>#!perl
  $g-&gt;(2) + $g-&gt;(1) + $g-&gt;(2) ... [A]
+ $g-&gt;(2) + $g-&gt;(1)           ... [B]
</code></pre>

<p>ここで $g->(2) は、</p>

<pre><code>#!perl
sub {
   my $n = shift;
   return $n &lt;= 2 ? 1 : $g-&gt;($n - 1) + $g-&gt;($n - 2);
}-&gt;(2);
</code></pre>

<p>であり、$n &lt;= 2 であれば 1 が返る。ということは、$g->(2) も $g->(1) も 1 だから、[A] + [B] は以下のように変換される。</p>

<pre><code>#!perl
  1 + 1 + 1 ... [A]
+ 1 + 1     ... [B]
</code></pre>

<p>というわけで、結果は 5 になる。ということらしい。なんとなくわかった。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/12/VirtFactoryServerSetup/">VirtFactoryServerSetup</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-01-12T15:41:17+09:00" pubdate>Jan 12<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/01/12/VirtFactoryServerSetup/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://trac.mizzy.org/public/wiki/VirtFactory">前回紹介した</a> Virt-Factory について、まずはサーバ側のインストールと設定手順を解説します。<a href="http://b.hatena.ne.jp/entry/http://trac.mizzy.org/public/wiki/VirtFactory">yappo さんと hirose31 さんに wktk されてしまった</a>ので、もう後には引けません。</p>

<p>おおまかな手順は <a href="http://virt-factory.et.redhat.com/vf-install-setup.php">本家サイトのドキュメント</a> の通りなのですが、ここの通りやってもうまくいかないので、試してみたい方は以下の手順を参考にしてください。</p>

<p>なお、本家から提供されているパッケージが Fedora 7 用のものしかないため、楽をするために Fedora 7 で検証しています。また、現時点での Virt-Factory のバージョンは 0.0.4 です。</p>

<h1>SELinux と iptables をオフに</h1>

<p>とりあえず検証目的なので、こいつらはオフにしときます。手順は省略。</p>

<h1>yum リポジトリの設定</h1>

<p>virt-factory.et.redhat.com のリポジトリを見に行くようにする。</p>

<pre><code>$ sudo wget http://virt-factory.et.redhat.com/download/repo/virt-factory.repo --output-document=/etc/yum.repos.d/virt-factory.repo
</code></pre>

<p>virt-factory.repo の内容が間違ってるので、以下のように修正。</p>

<pre><code>#!diff
--- /etc/yum.repos.d/virt-factory.repo.orig      2007-12-29 21:14:22.000000000 +0900
+++ /etc/yum.repos.d/virt-factory.repo   2007-12-29 21:14:55.000000000 +0900
@@ -1,11 +1,11 @@
 [virt-factory-fedora]
 name=Virt-factory packages
-baseurl=http://virt-factory.et.redhat.com/download/repo/fc$releasever/stable/$arch/
+baseurl=http://virt-factory.et.redhat.com/download/repo/f$releasever/stable/i386/
 enabled=1
 gpgcheck=0

 [virt-factory-srpms]
 name=Virt-factory src packages
-baseurl=http://virt-factory.et.redhat.com/download/repo/fc$releasever/stable/srpms
+baseurl=http://virt-factory.et.redhat.com/download/repo/f$releasever/stable/srpms
 enabled=0
 gpgcheck=0   
</code></pre>

<p>$arch の部分は Fedora 7 32bit だと i686 になってしまうが、リポジトリのディレクトリは i386 なので、修正が必要。64bit だと $arch 部分はそのままでいいかも。</p>

<h1>必要なパッケージのインストール</h1>

<p>普通に virt-factory-server パッケージを yum で入れると、依存関係で cobbler と koan が一緒にインストールされるのですが、updates にある cobbler 0.6.4 と koan 0.6.3 がインストールされてしまって、virt-factory-server が正常に動きません。なので、virt-factory.et.redhat.com にある 0.6.2 を明示的にインストールしてやります。</p>

<pre><code>$ sudo yum install cobbler-0.6.2-1.fc7  koan-0.6.2-1.fc7
</code></pre>

<p>次に、Virt-Factory サーバ本体である virt-factory-server パッケージをインストールします。また、依存関係にはないものの、python-setuptools も必要なので一緒に入れておきます。</p>

<pre><code>$ sudo yum install virt-factory-server python-setuptools
</code></pre>

<h1>PostgreSQL の初期化</h1>

<p>Virt-Factory はデータベースとして PostgreSQL を利用しています。（MySQL への対応予定もあるらしい。）以下のコマンドを実行して、Virt-Factory から PostgreSQL が利用できる状態にします。</p>

<pre><code>$ sudo /etc/init.d/postgresql initdb    
$ sudo vf_fix_db_auth
</code></pre>

<h1>デーモンの起動</h1>

<p>Puppet を利用してるので、とりあえず Puppet サーバを起動しておきます。（が、この段階では起動しなくても問題ないです。）</p>

<pre><code>$ sudo /sbin/chkconfig puppetmaster on 
$ sudo /etc/init.d/puppetmaster start
</code></pre>

<p>次に qpidd を起動します。これは必ず起動しておく必要があります。qpidd は、Virt-Factory のクライアント/サーバ間でのメッセージングのために利用されています。</p>

<pre><code>$ sudo /sbin/chkconfig qpidd on
$ sudo /etc/init.d/qpidd start 
</code></pre>

<p>最後に virt-factory-server を起動します。</p>

<pre><code>$ sudo /sbin/chkconfig virt-factory-server on
$ sudo /etc/init.d/virt-factory-server start
</code></pre>

<p>初回は起動時はデータベースとかテーブルを自動で作ってくれます。</p>

<h1>vf_server import の実行</h1>

<p>vf_server import により、以下の内容が実行されます。</p>

<ul>
<li>/etc/virt-factory/settings の repos セクションに基づく yum リポジトリミラーの作成</li>
<li>/etc/virt-factory/settings の mirrors セクションに基づくディストリビューションミラーの作成</li>
<li>プロファイルの作成</li>
</ul>


<p>ただし、プロファイルは cobbler import で作成されるものと一緒で、Virt-Factory に適したものではないため、捨ててしまって構いません。</p>

<p>まず、/etc/virt-factory/settings を2箇所いじります。mirrors のところは元は FC-7 になってるのですが、F-7 にしておく必要があります。</p>

<p>address は Virt-Factory サーバの IP アドレスを指定します。今回の import とは直接関係しませんが、どのみち変える必要があるので変えておきます。</p>

<pre><code>mirrors:
    F-7: [ 'rsync://ftp.jaist.ac.jp/pub/Linux/Fedora/releases/7/Fedora/i386/os/', '']
this_server:
    address: '192.168.25.134'
</code></pre>

<p>または、iso ファイルをダウンロードしてきて、</p>

<pre><code>$ sudo mkdir /mnt/dvdiso
$ sudo mount -t iso9660 -o loop F-7-i386-DVD.iso /mnt/dvdiso
</code></pre>

<p>とマウントして、/etc/virt-factory/settings には</p>

<pre><code>mirrors:
    F-7: [ '/mnt/dvdiso', '']
</code></pre>

<p>と設定してもいいです。検証で何度もやる場合には、iso イメージを持ってきておいた方が早いですね。</p>

<p>Virt-Factory でインストールするディストリビューションが Fedora 7 以外の場合には、repos セクションや mirrors セクションを適切に修正する必要があります。</p>

<p>設定ができたら、以下のコマンドを実行します。</p>

<pre><code>$ sudo vf_server import
</code></pre>

<p>cobbler report で結果を確認できます。distro, repo, profile が登録されていることが確認できます。</p>

<pre><code>$ sudo cobbler report
distro          : F-7-i386
kernel          : /var/www/cobbler/ks_mirror/F-7/images/pxeboot/vmlinuz
initrd          : /var/www/cobbler/ks_mirror/F-7/images/pxeboot/initrd.img
kernel options  : {}
architecture    : x86
ks metadata     : {'tree': 'http://@@server@@/cblr/links/F-7-i386'}
breed           : redhat

distro          : F-7-xen-i386
kernel          : /var/www/cobbler/ks_mirror/F-7/images/xen/vmlinuz
initrd          : /var/www/cobbler/ks_mirror/F-7/images/xen/initrd.img
kernel options  : {}
architecture    : x86
ks metadata     : {'tree': 'http://@@server@@/cblr/links/F-7-xen-i386'}
breed           : redhat

repo             : F-7-i386-core-lite
mirror           : http://download.fedora.redhat.com/pub/fedora/linux/releases/7/Everything/i386/os/
keep updated     : True
local filename   : F-7-i386-core-lite
rpm list         : ['m2crypto', 'python-simplejson']
createrepo_flags : -c cache

repo             : F-7-i386-updates-lite
mirror           : http://download.fedora.redhat.com/pub/fedora/linux/updates/7/i386/
keep updated     : True
local filename   : F-7-i386-updates-lite
rpm list         : ['cobbler', 'koan', 'python-cheetah', 'yum-utils', 'puppet',
'facter']
createrepo_flags : -c cache

repo             : F-7-i386-vf_repo
mirror           : http://virt-factory.et.redhat.com/download/repo/f7/stable/i386/
keep updated     : True
local filename   : F-7-i386-vf_repo
rpm list         :
createrepo_flags : -c cache

repo             : F-7-x86_64-core-lite
mirror           : http://download.fedora.redhat.com/pub/fedora/linux/releases/7/Everything/x86_64/os/
keep updated     : True
local filename   : F-7-x86_64-core-lite
rpm list         : ['m2crypto', 'python-simplejson']
createrepo_flags : -c cache

repo             : F-7-x86_64-vf_repo
mirror           : http://virt-factory.et.redhat.com/download/repo/f7/stable/x86_64/
keep updated     : True
local filename   : F-7-x86_64-vf_repo
rpm list         :
createrepo_flags : -c cache

profile         : F-7-i386
distro          : F-7-i386
kickstart       : /etc/cobbler/kickstart_fc6.ks
kernel options  : {}
ks metadata     : {}
virt file size  : 5
virt ram        : 512
virt type       : auto
virt path       :
repos           : []

profile         : F-7-xen-i386
distro          : F-7-xen-i386
kickstart       : /etc/cobbler/kickstart_fc6.ks
kernel options  : {}
ks metadata     : {}
virt file size  : 5
virt ram        : 512
virt type       : auto
virt path       :
repos           : [] 
</code></pre>

<h1>サンプルプロファイルのインポート</h1>

<p>virt-factory.et.redhat.com にサンプルプロファイルがあるので、こいつをインポートしてみます。</p>

<pre><code>$ sudo rpm -Uvh http://virt-factory.et.redhat.com/download/profiles/vf-profile-Container-1-2.fc7.noarch.rpm
$ sudo rpm -Uvh http://virt-factory.et.redhat.com/download/profiles/vf-profile-Test1-1.234-2.fc7.noarch.rpm
$ sudo vf_import
</code></pre>

<p>cobbler report を実行すると、以下の4つのプロファイルが登録されていることが確認できます。</p>

<pre><code>profile         : Container::F-7-i386
distro          : F-7-i386
kickstart       : /var/lib/virt-factory/kick-fc6.ks
kernel options  : {}
ks metadata     : {'server_name': '192.168.10.14', 'node_bare_packages': 'libvirt\npython-virtinst\nqemu\nkvm\n', 'cryptpw': '$1$mF86/UHC$WvcIcX2t6crBz2onWxyac.', 'server_param': '--server=http://192.168.10.14:5150', 'node_common_packages': 'koan\npuppet\nvirt-factory-nodes\nvirt-factory-register\nqemu\nkvm\n', 'network_param': '--allow-bridge-config', 'extra_post_magic': '/sbin/chkconfig 345 qemu on\n', 'node_virt_packages': '', 'token_param': '--profile=Container::F-7-i386'}
virt file size  : 0
virt ram        : 0
virt type       : qemu
virt path       :
repos           : ['F-7-i386-updates-lite', 'F-7-i386-core-lite', 'F-7-i386-vf_repo']

profile         : Container::F-7-xen-i386
distro          : F-7-xen-i386
kickstart       : /var/lib/virt-factory/kick-fc6.ks
kernel options  : {}
ks metadata     : {'server_name': '192.168.10.14', 'node_bare_packages': 'libvirt\npython-virtinst\nxend\n', 'cryptpw': '$1$mF86/UHC$WvcIcX2t6crBz2onWxyac.', 'server_param': '--server=http://192.168.10.14:5150', 'node_common_packages': 'koan\npuppet\nvirt-factory-nodes\nvirt-factory-register\nxen\nkernel-xen\n', 'network_param': '--allow-bridge-config', 'extra_post_magic': _, 'node_virt_packages': _, 'token_param': '--profile=Container::F-7-xen-i386'}
virt file size  : 0
virt ram        : 0
virt type       : xenpv
virt path       :
repos           : ['F-7-i386-updates-lite', 'F-7-i386-core-lite', 'F-7-i386-vf_repo'] 

profile         : Test1::F-7-i386
distro          : F-7-i386
kickstart       : /var/lib/virt-factory/kick-fc6.ks
kernel options  : {}
ks metadata     : {'server_name': '192.168.10.14', 'node_bare_packages': _, 'cryptpw': '$1$mF86/UHC$WvcIcX2t6crBz2onWxyac.', 'server_param': '--server=http://192.168.10.14:5150', 'node_common_packages': 'koan\npuppet\nvirt-factory-nodes\nvirt-factory-register\nqemu\nkvm\n', 'network_param': '', 'node_virt_packages': _, 'token_param': '--profile=Test1::F-7-i386'}
virt file size  : 5
virt ram        : 512
virt type       : qemu
virt path       :
repos           : ['F-7-i386-updates-lite', 'F-7-i386-core-lite', 'F-7-i386-vf_repo']

profile         : Test1::F-7-xen-i386
distro          : F-7-xen-i386
kickstart       : /var/lib/virt-factory/kick-fc6.ks
kernel options  : {}
ks metadata     : {'server_name': '192.168.10.14', 'node_bare_packages': _, 'cryptpw': '$1$mF86/UHC$WvcIcX2t6crBz2onWxyac.', 'server_param': '--server=http://192.168.10.14:5150', 'node_common_packages': 'koan\npuppet\nvirt-factory-nodes\nvirt-factory-register\nxen\nkernel-xen\n', 'network_param': '', 'node_virt_packages': _, 'token_param': '--profile=Test1::F-7-xen-i386'}
virt file size  : 5
virt ram        : 512
virt type       : xenpv
virt path       :
repos           : ['F-7-i386-updates-lite', 'F-7-i386-core-lite', 'F-7-i386-vf_repo']
</code></pre>

<p>cobbler import した時のプロファイルと違って、ks_metadata に koan, pupppet, virt-factory-nodes, virt-factory-register など、Virt-Factory クライアントとして必要なパッケージが含まれていたり、キックスタートファイル（/var/lib/virt-factory/kick-fc6.ks ）の %post セクションで、Virt-Factory クライアントとして必要な処理が実行されています。</p>

<h1>Web UI のインストール、設定、起動</h1>

<p>virt-factory-wui パッケージをインストールするのですが、そのままインストールすると、rubygem-rails-2.0.1-1.fc7 がインストールされてしまい、動作しません。なので、明示的に rubygem-rails-1.2.3-1.fc7 をインストールします。</p>

<pre><code>$ sudo yum install rubygem-rails-1.2.3-1.fc7
</code></pre>

<p>その後 virt-factory-wui パッケージをインストールします。</p>

<pre><code>$ sudo yum install virt-factory-wui
</code></pre>

<p>デフォルトでは 127.0.0.1 でリッスンするようになっているので、他のマシンからアクセスする場合には、/etc/init.d/virt-factory-wui を書き換えます。</p>

<pre><code>#!diff
--- /etc/init.d/virt-factory-wui.orig       2007-12-30 02:41:06.000000000 +0900
+++ /etc/init.d/virt-factory-wui    2007-12-30 02:41:23.000000000 +0900
@@ -10,7 +10,7 @@
 VIRTFACTORY_DIR=/usr/share/virt-factory-wui
 MONGREL_LOG=/var/log/virt-factory-wui/mongrel.log
 MONGREL_PID=/var/run/virt-factory-wui/mongrel.pid
-ADDR=127.0.0.1
+ADDR=0.0.0.0
 RAILS_ENVIRONMENT=production
 USER=virtfact
 GROUP=virtfact
</code></pre>

<p>起動します。</p>

<pre><code>$ sudo /sbin/chkconfig virt-factory-wui on
$ sudo /etc/init.d/virt-factory-wui start  
</code></pre>

<p>css ファイルへのパスがおかしいので、/usr/share/virt-factory-wui/app/views/layouts/virt-factory-layout.rhtml を修正します。</p>

<pre><code>#!diff
--- /usr/share/virt-factory-wui/app/views/layouts/virt-factory-layout.rhtml.ori2007-12-30 02:44:24.000000000 +0900
+++ /usr/share/virt-factory-wui/app/views/layouts/virt-factory-layout.rhtml    2007-12-30 02:44:40.000000000 +0900
@@ -7,7 +7,7 @@
      &lt;!-- dynamically filled in page title --&gt;
      &lt;title&gt;virt-factory: &lt;%= @page_title %&gt;&lt;/title&gt;

-     &lt;link rel="stylesheet" href="&lt;%= ActionController::AbstractRequest.relative_url_root %&gt;/style.css" type="text/css" /&gt;
+     &lt;link rel="stylesheet" href="/style.css" type="text/css" /&gt;

   &lt;/head&gt;
</code></pre>

<p>3000番 ポートにアクセスして、admin, fedora でログインします。</p>

<h1>virt-factory-ampm のインストール</h1>

<p>virt-factory-ampm は、Virt-Factory のコマンドラインクライアントで、リモートホスト上に仮想マシンを作成したり、仮想マシンの起動/停止を行ったり、といったことができます。</p>

<pre><code>$ sudo yum install virt-factory-ampm 
</code></pre>

<p>このままだと ampm コマンドを実行する度に no config file found と言われてうざいので、空の .ampm_config を作成しておきます。</p>

<pre><code>$ touch ~/.ampm_config
</code></pre>

<p>help を見ると、どんなことができるかがざっとわかります。</p>

<pre><code>$ ampm --help
global options
         --help, -h
         --verbose, -v
         --server &lt;server url&gt;
         --username &lt;username&gt;
         --passowrd &lt;password&gt;
valid modes include:
         pause, create, list, start, add, shutdown, query, unpause, delete
pause:
        Pause a guest
        ampm pause guest_name [--guest_id] &lt;guest_id&gt;
create:
        Create a new guest
        --help, -h
        --verbose, -v
        --host &lt;hostname&gt;           the  host to run the guest on
        --profile &lt;profilename&gt;     the profile to create the guest with
list:
        List information about virt-factory
        valid sub modes are hosts, guests, status, profiles, tasks, users
                 hosts      list machines capabable of running guests
                 guests     list virtulized guests
                 status     list status of virtulized guests
                 profiles   list profiles available for creating guests or hosts
                 tasks      list tasks that are queued
                 users      list users
start:
        Start up a guest
        ampm start guest_name [--guest_id] &lt;guest_id&gt;
add:
         Add a new user to virt-factory
         --username &lt;username&gt;
         --password &lt;password&gt;
         --first &lt;first_name
         --middle &lt;middle_name&gt;
         --last &lt;last_name&gt;
         --email &lt;email address&gt;
         --description &lt;desription&gt;
shutdown:
        Shutdown a guest
        ampm shutdown guest_name [--guest_id] &lt;guest_id&gt;
query:
        Query a guest for more info about what host or profile a guest is running
        --help, -h
        --verbose, -v
        --host &lt;host&gt;     which host a guest is running on
        --profile &lt;profile&gt;          which profile a guest is running
unpause:
        Unpause a guest
        ampm unpause guest_name [--guest_id] &lt;guest_id&gt;
delete:
        Delete a task, profile, or user
         --help, -h
         --verbose, -v
         --task_id &lt;task_id&gt;            delete a task from the task queue
         --user_id &lt;user_id&gt;            delete a user
</code></pre>

<p><del>次回はクライアント側のインストールと設定手順について解説予定です。</del><a href="http://trac.mizzy.org/public/wiki/VirtFactoryClientSetup">解説アップしました</a>。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/12/VirtFactoryClientSetup/">VirtFactoryClientSetup</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-01-12T15:38:49+09:00" pubdate>Jan 12<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/01/12/VirtFactoryClientSetup/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://trac.mizzy.org/public/wiki/VirtFactoryServerSetup">前回</a>に続き、今回はクライアント側の手順です。クライアント側では、必要なソフトウェアのインストールと、サーバへの登録を行います。</p>

<p>クライアントのサーバへの登録は、既に OS がインストールされた状態から行う方法と、OS がインストールされていないまっさらな状態から行う方法の2つがあります。</p>

<p>以下、2つの方法について手順を解説します。これもサーバと一緒で、Fedora 7 で試しています。</p>

<h1>既に OS がインストールされた状態から行う方法</h1>

<h2>SELinux と iptables をオフに</h2>

<p>とりあえず検証目的なので、こいつらはオフにしときます。手順は省略。</p>

<h2>yum リポジトリの設定</h2>

<p>これは <a href="http://trac.mizzy.org/public/wiki/VirtFactoryServerSetup#yum%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AE%E8%A8%AD%E5%AE%9A">サーバ側の設定</a> と同じなので省略。</p>

<h2>必要なパッケージのインストール</h2>

<p>Virt-Factory は仮想サーバの管理を行うためのものなので、当然何らかの仮想環境が必要。というわけで、Xen カーネルとツールをインストール。</p>

<pre><code>$ sudo yum install kernel-xen xen
</code></pre>

<p>それから、Python をアップデートしないと、後述する virt-factory-node-server でエラーが出たので、アップデートしておく。</p>

<pre><code>$ sudo yum update python
</code></pre>

<p>Xen カーネルで起動するために、再起動する。</p>

<p>現在の Virt-Factory は、Cobbler/Koan 0.6.2 を前提にしているため、バージョン指定で 0.6.2 をインストール。</p>

<pre><code>$ sudo yum install koan-0.6.2-1.fc7
</code></pre>

<p>その他必要なパッケージをインストール。</p>

<pre><code>$ sudo yum install virt-factory-nodes virt-factory-register libvirt-python
</code></pre>

<h2>サーバへの登録</h2>

<p>Virt-Factory クライアントをサーバに登録するためには、次のコマンドを実行します。</p>

<pre><code>$ sudo vf_register --serverurl=http://server.example.org:5150 --profile=Container     
</code></pre>

<p>server.example.org の部分は、サーバ側で Python の socket.gethostname() で取得できるホスト名と同一である必要があります。（qpid でのメッセージング処理の関係で。）</p>

<p>登録が正常に完了すれば、サーバ側で ampm コマンドを実行して、確認することができます。（Web UI でも確認できます。）</p>

<pre><code>$ sudo ampm list hosts
hostname: client.example.org id: 1 profile_name: Container::F-7-xen-i386 
</code></pre>

<p>最後に virt-factory-node-server を起動します。</p>

<pre><code>$ sudo /sbin/chkconfig virt-factory-node-server on
$ sudo /etc/init.d/virt-factory-node-server start
</code></pre>

<h1>OS がインストールされていない状態からの登録</h1>

<p>OS がインストールされていない場合、PXE ブートからネットワークインストールを行い、その流れでサーバへの登録まで一気にやってしまいます。これは、<a href="http://trac.mizzy.org/public/wiki/VirtFactoryServerSetup#yum%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AE%E8%A8%AD%E5%AE%9A">前回の手順でインポートしたプロファイル</a>の中で、これらの手順をすべてやるように指定されているので、特にこれ以上何かを設定する必要はありません。マシンを PXE ブートし、boot: プロンプトでプロファイル名 (Container::F-7-xen-i386)を入力すれば、あとは全て自動的に進んでいくはずです。（まだきちんと検証できてません。）</p>

<p>また、事前に Web UI で MAC アドレスを登録しておけば、boot: プロンプトにプロファイル名を入れる必要すらありません。</p>

<p>以上で、Virt-Factory クライアントのサーバへの登録は完了です。この後、ampm コマンドで、リモートの Virt-Factory クライアント上にコマンド一発でゲスト OS をインストールしたり、ゲスト OS の起動や停止をリモートから行ったり、複数のリモートクライアント上にあるゲスト OS をすべてリストアップしたり、といった、Virt-Factory のメインの使い方に入るわけですが、この解説はまた次回に。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2008/01/05/VirtFactory/">VirtFactory</a></h1>
    
    
      <p class="meta">
        




  

<time datetime="2008-01-05T20:17:06+09:00" pubdate>Jan 5<span>th</span>, 2008</time>
        
         | <a href="/blog/2008/01/05/VirtFactory/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://trac.mizzy.org/public/wiki/Cobbler">Cobbler</a> や <a href="http://trac.mizzy.org/public/wiki/Koan">Koan</a> について触れたところで、次は <a href="http://virt-factory.et.redhat.com/">Virt-Factory</a> です。</p>

<p><a href="http://blog.yappo.jp/yappo/archives/000555.html">Yappo さんが Xen 環境で Cobbler/Koan が動くことを検証してくださった</a>ので、心置きなく Virt-Factory の紹介ができます。こちらの身勝手なお願いに応じてくれた Yappo さん、ありがとうございます。</p>

<p>Virt-Factory は、大量の仮想サーバの管理を楽に行うためのツールで、Cobbler/Koan + Puppet + これらをラップするサーバ/クライアントデーモンとコマンドラインツール + Web UI + XMLRPC API、といった感じです。具体的には、以下のような感じ。</p>

<ul>
<li>Cobbler/Koan、Puppet の統合

<ul>
<li>Cobbler による PXE ブート + ネットワークインストール環境の構築。単に Cobbler を利用する場合とは違い、キックスタートファイルに、Virt-Factory に必要なパッケージのインストールや、インストール後に必要な処理の実行を含めてくれる。</li>
<li>Koan によるホスト OS や Xen/QEMU ゲスト OS のコマンド一発インストール。Koan を使う場合は、ホスト OS 上で実行する必要があるが、Virt-Factory を使うと中央のサーバからリモートで実行できる。</li>
<li>リモートのホスト OS 上にある仮想サーバの状況を、中央のサーバで一元管理できる。</li>
<li>Cobbler でのキックスタートファイル作成時に、Puppet パッケージのインストール処理を含めてくれたり、プロファイル属性として Puppet クラスを指定できたりとか。おそらく Puppet サーバのノード管理とも連携するんじゃないだろうか。（ここはまだちゃんと検証できてない。）</li>
</ul>
</li>
<li>Web UI でプロファイルやシステムの登録、管理などができる</li>
<li>Web UI やコマンドラインツールは XMLRPC API と連携してる</li>
</ul>


<p>とてもよさげなツールではあるのですが、色んなツールを統合してるだけあって、できることが多すぎてわけがわからないし、<a href="http://virt-factory.et.redhat.com/vf-install-setup.php">本家サイトのインストール/セットアップドキュメント</a>の通りにやっても動かないし、ドキュメントも不十分で、これから触ってみようと思う方は苦労するかと思いますので、インストール手順から使い方まで、自分が理解できた範囲で、今後数回にわけてご紹介していこうと思います。</p>

<p>ただしプロダクトとしてはまだ発展途上という感じで、すぐに実践投入できるものではなさそうです。</p>

<p><del>とりあえず次回は Virt-Factory サーバのインストールと設定について解説予定です。</del><a href="http://trac.mizzy.org/public/wiki/VirtFactoryServerSetup">解説をアップしました</a>。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/10/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/8/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/10/30/vimeo-tag-plugin/">Vimeo tag plugin</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/10/29/typo-to-octopress/">Typo to Octopress</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/10/21/twan-tag-plugin/">TWAN tag plugin for Jekyll</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/10/17/first-post/">自宅サーバが死にました</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/10/05/MyResume/">MyResume</a>
      </li>
    
  </ul>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2011 - Gosuke Miyashita -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mizzyorg';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
