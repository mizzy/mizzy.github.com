<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title><![CDATA[Gosuke Miyashita]]></title>
    <link href="https://mizzy.org/atom.xml" rel="self"/>
    <link href="https://mizzy.org/"/>
    <updated>2026-01-27T19:08:09+09:00</updated>
    <id>https://mizzy.org/</id>
    <author>
        <name><![CDATA[Gosuke Miyashita]]></name>
    </author>
    <generator uri="https://github.com/mizzy/nebel/">Nebel</generator>

    <entry>
        <title type="html"><![CDATA[NebelにOGP画像自動生成機能を追加した]]></title>
        <link href="https://mizzy.org/blog/2026/01/27/2/"/>
        <updated>2026-01-27T19:08:09+09:00</updated>
        <id>https://mizzy.org/blog/2026/01/27/2/</id>
        <content type="html"><![CDATA[
<p>tokuhiromさんの<a href="https://blog.64p.org/entry/2026/01/26/110749">ogp を設定した</a>という記事を読んで、そういえば自分もOGP対応しなきゃな、と思い出した。以前から対応しようと思いつつ、画像生成とか面倒だな、と後回しにしていた。でも今なら生成AIでシュッと対応できるな、と思ってやってみた。</p>
<p>ちなみにこのブログ記事もClaude Codeが書いたものをそのまま出している。</p>
<p>このブログの静的サイトジェネレータである<a href="https://github.com/mizzy/nebel">Nebel</a>に、OGP画像を自動生成する機能を追加した。</p>
<hr />
<h2>OGP画像とは</h2>
<p>OGP（Open Graph Protocol）画像は、SNSでURLをシェアしたときに表示されるサムネイル画像のこと。TwitterやFacebookなどでリンクを共有すると、タイトルや説明文と一緒に画像が表示される。</p>
<p>これまでこのブログにはOGP画像を設定していなかったので、SNSでシェアしてもデフォルトの味気ない表示になっていた。</p>
<hr />
<h2>実装内容</h2>
<p><code>nebel generate</code>を実行すると、各記事のタイトルからOGP画像（1200x630px）を自動生成するようにした。</p>
<ul>
<li><strong>サイズ</strong>: 1200x630px（OGP推奨サイズ）</li>
<li><strong>背景</strong>: ダークグレー（#333）</li>
<li><strong>テキスト</strong>: 記事タイトル（白色、中央配置）</li>
<li><strong>フォント</strong>: Noto Sans CJK JP Bold（日本語対応）</li>
</ul>
<p>生成される画像はこんな感じ。</p>
<p><img src="/blog/2026/01/27/2/ogp.png" alt="OGP画像のサンプル" /></p>
<hr />
<h2>使用ライブラリ</h2>
<p>Goで画像を生成するために<a href="https://github.com/fogleman/gg">fogleman/gg</a>というライブラリを使った。シンプルなAPIで2D描画ができるので、こういった用途にはちょうど良い。</p>
<p>日本語フォントには<a href="https://fonts.google.com/noto/specimen/Noto+Sans+JP">Noto Sans CJK JP</a>を使用。CJK（中国語・日本語・韓国語）に対応しているので、日本語タイトルも問題なく描画できる。</p>
<hr />
<h2>テンプレートの変更</h2>
<p>HTMLテンプレートには、OGPとTwitter Cardのメタタグを追加した。</p>
<pre><code class="language-html">&lt;!-- OGP --&gt;
&lt;meta property=&quot;og:title&quot; content=&quot;{{ .Title }}&quot;/&gt;
&lt;meta property=&quot;og:type&quot; content=&quot;article&quot;/&gt;
&lt;meta property=&quot;og:url&quot; content=&quot;https://mizzy.org{{ .Path }}/&quot;/&gt;
&lt;meta property=&quot;og:image&quot; content=&quot;https://mizzy.org{{ .OGImagePath }}&quot;/&gt;
&lt;meta property=&quot;og:site_name&quot; content=&quot;Gosuke Miyashita&quot;/&gt;

&lt;!-- Twitter Card --&gt;
&lt;meta name=&quot;twitter:card&quot; content=&quot;summary_large_image&quot;/&gt;
&lt;meta name=&quot;twitter:title&quot; content=&quot;{{ .Title }}&quot;/&gt;
&lt;meta name=&quot;twitter:image&quot; content=&quot;https://mizzy.org{{ .OGImagePath }}&quot;/&gt;
</code></pre>
<p>これで、SNSでシェアしたときにタイトル入りの画像が表示されるようになる。</p>
<hr />
<h2>今後</h2>
<p>デザインは現状かなりシンプルなので、余裕があればもう少し凝ったものにしたい。ロゴを入れたり、グラデーション背景にしたり、といったあたりは比較的簡単にできそう。</p>

]]></content>
    </entry>

    <entry>
        <title type="html"><![CDATA[Carinaの型システムについて]]></title>
        <link href="https://mizzy.org/blog/2026/01/27/1/"/>
        <updated>2026-01-27T09:54:37+09:00</updated>
        <id>https://mizzy.org/blog/2026/01/27/1/</id>
        <content type="html"><![CDATA[
<p>Terraformライクなツール<a href="https://github.com/mizzy/carina">Carina</a>をつくりはじめた動機のひとつに、「型システムの強化」がある。</p>
<p>Terraformではプリミティブな型（string, number, bool）に加えて、listやmap、objectなどの複合型がサポートされている。しかし、型システム自体はあまり強力ではない。</p>
<p>例えば、regionやcidr_blockのような特定のドメインに特化した型は存在しない。そのため、これらの値を扱う際には単なるstring型として扱われ、誤った値が設定される可能性がある。誤った設定をした場合、validateやplanで気づけるのであればまだ良いが、planが通ってしまい、apply時にエラーになってはじめて間違いが発覚することもある。</p>
<p>これを防ぐために、Carinaではドメイン固有型の導入を試している。現在実装しているものとして、region型やcidr型がある。これらの型は、それぞれのドメインに特化したバリデーションロジックを持っており、不正な値が設定された場合には即座にエラーを返す。</p>
<p>例えば、誤ってリージョンを指定すべきところにアベイラビリティゾーンを指定したとする。</p>
<pre><code class="language-hcl">provider aws {
  region = &quot;ap-northeast-1a&quot;
}
</code></pre>
<p>Terraformではさすがに<code>plan</code>は通らないが、<code>validate</code>は通る。</p>
<pre><code class="language-shell">$ terraform validate
Success! The configuration is valid.
</code></pre>
<p>Carinaもproviderの定義はTerraformと同じように記述するが、<code>validate</code>で以下のようなエラーが返る。</p>
<pre><code class="language-shell">Error: provider aws: Validation failed: Invalid region 'ap-northeast-1a', expected one of: ap-northeast-1, ap-northeast-2, ap-northeast-3, ap-southeast-1, ap-southeast-2, ap-south-1, us-east-1, us-east-2, us-west-1, us-west-2, eu-west-1, eu-west-2, eu-west-3, eu-central-1, eu-north-1, ca-central-1, sa-east-1 or DSL format like aws.Region.ap_northeast_1
</code></pre>
<p>このようにCarinaでは、型システムを強化することで、より早い段階で設定ミスを検出できるようにしたい、と考えている。</p>
<p>また、CarinaではAWSリージョンはEnum型として定義されているため、以下のようにリージョンを指定することもできる。</p>
<pre><code>provider aws {
  region = aws.Region.ap_northeast_1
}
</code></pre>
<p>更にLSPもサポートしているため、IDE上で補完候補としてリージョンの一覧が表示される。</p>
<p><img src="/images/2026/01/carina-region-completion.png" alt="リージョンの補完候補" /></p>
<p>誤った文字列を指定している場合も、IDE上でエラーが表示される。</p>
<p><img src="/images/2026/01/carina-region-error.png" alt="IDEでのエラー表示" /></p>
<p>もう一つの例として、cidr型を紹介する。cidr型はCIDR表記のIPアドレスブロックを表す型で、不正なCIDR表記が指定された場合にはエラーを返す。</p>
<p>例えば、以下のように不正なプレフィックス長を指定したとする。</p>
<pre><code>let main_vpc = aws.vpc {
    name       = &quot;main-vpc&quot;
    cidr_block = &quot;10.0.0.0/33&quot;
}
</code></pre>
<p><code>carina validate</code>を実行すると、以下のようなエラーが返る。</p>
<pre><code>Error: vpc.main-vpc: Validation failed: Invalid prefix length '33': must be 0-32
</code></pre>
<p>Terraformでもvalidateで同様のエラーが返るが、IntelliJ IDEAのTerraformプラグインではCIDR表記のフォーマットエラーが検出されない。CarinaのLSPでは、IDE上で以下のようにエラーが表示される。</p>
<p><img src="/images/2026/01/carina-cidr-error.png" alt="cidr_blockのエラー表示" /></p>
<p>まったくCIDR表記として成り立っていない場合も、当然ながらIDE上でエラーが表示される。</p>
<p><img src="/images/2026/01/carina-cidr-format-error.png" alt="cidr_blockのフォーマットエラー表示" /></p>
<p>cidr型でもregion型と同様に、補完候補として一般的なCIDR表記が表示される。</p>
<p><img src="/images/2026/01/carina-cidr-completion.png" alt="cidr_blockの補完候補" /></p>
<p>さらに別の例として、S3バケットの<code>versioning_configuration</code>属性を紹介する。<code>versioning_configuration</code>はS3バケットのバージョニング設定を表すオブジェクト型で、<code>status</code>フィールドには<code>Enabled</code>または<code>Suspended</code>のいずれかを文字列で指定する必要がある（<code>Disabled</code>もあるがこれはちょっと特殊な値）。誤った文字列を指定すると、validateやplanでは不正な値が検出されるが、IDE上ではエラーや補完候補が表示されないため、あれ、Enableだっけ？Enabledだっけ？と迷ったら公式ドキュメントを確認する必要がある。</p>
<pre><code class="language-hcl">resource &quot;aws_s3_bucket_versioning&quot; &quot;versioning_example&quot; {
  bucket = aws_s3_bucket.example.id
  versioning_configuration {
    status = &quot;Enabled&quot;
  }
}
</code></pre>
<p>Carinaでは、このstatusフィールドをEnum型として定義しているため、以下のように補完候補として&quot;Enabled&quot;と&quot;Suspended&quot;が表示される。</p>
<p><img src="/images/2026/01/carina-s3-versioning-completion.png" alt="S3バケットのversioning補完" /></p>
<p>エディタ上でのエラー表示や自動補完については、今は生成AIが基本的にコードを書いてくれるのであまり気にする必要はないかもしれない。しかし、型システムが強力であればあるほど、生成AIがより正確なコードを生成できるようになり、早い段階で間違いに気づけるようになるはず。</p>
<p>型システムを強化するためには、各リソースの属性やその型情報を正確に把握する必要がある。AWSの場合、CloudFormationのリソースタイプスキーマを利用することで、各リソースの属性情報を取得できる。例えば、以下のコマンドを実行すると、S3バケットリソースのスキーマ情報が取得できる。</p>
<pre><code class="language-shell">aws cloudformation describe-type \
      --type RESOURCE \
      --type-name AWS::S3::Bucket \
      --query &quot;Schema&quot; \
      --output text
</code></pre>
<p>これを元にCarinaで型定義を自動生成するなり、AIに生成させるなりすれば、型システムの強化がより容易になると考えている。</p>

]]></content>
    </entry>

    <entry>
        <title type="html"><![CDATA[carina planで依存関係を可視化]]></title>
        <link href="https://mizzy.org/blog/2026/01/25/2/"/>
        <updated>2026-01-25T15:14:36+09:00</updated>
        <id>https://mizzy.org/blog/2026/01/25/2/</id>
        <content type="html"><![CDATA[
<p><a href="https://github.com/mizzy/carina">Carina</a>の<code>plan</code>コマンドで、リソース間の依存関係をツリー構造で表示できるようにした。</p>
<p><img src="/images/2026/01/carina-plan.png" alt="carina plan の出力" /></p>
<p>Terraformの<code>plan</code>コマンドは、作成・変更・削除されるリソースがフラットなリストで表示される。どのリソースが作成されるかはわかるが、リソース間の依存関係は出力からは読み取れない。</p>
<p>Carinaの<code>plan</code>では、依存関係に基づいてリソースがツリー構造で表示される。上の例だと、VPCの下にSecurity Groupがあり、その下にIngress Ruleがある、という階層構造が一目でわかる。</p>
<p>これにより、planの出力を見るだけで、リソース間の依存関係を把握できる。</p>

]]></content>
    </entry>

    <entry>
        <title type="html"><![CDATA[Carina Modules]]></title>
        <link href="https://mizzy.org/blog/2026/01/25/1/"/>
        <updated>2026-01-25T12:59:31+09:00</updated>
        <id>https://mizzy.org/blog/2026/01/25/1/</id>
        <content type="html"><![CDATA[
<p><a href="/blog/2026/01/24/1/">昨日の記事</a>で紹介した<a href="https://github.com/mizzy/carina">Carina</a>に、モジュール機能を実装した。</p>
<hr />
<h2>背景</h2>
<p><a href="/blog/2025/11/17/1/">YAPC::Fukuoka 2025での発表</a>で、インフラコードのモジュール化の難しさについて話した。</p>
<script defer class="speakerdeck-embed" data-id="facd81a255fb4c32ab2d80c559f1ede1" data-ratio="1.7777777777777777" src="//speakerdeck.com/assets/embed.js"></script>
<p>ここで挙げた問題のひとつが「内部構造の把握と依存関係の追跡が困難」という点。Terraformのモジュールは中身を見ないと何が作られるかわからないし、依存関係も追いづらい。planを実行してみれば、どんなリソースがつくられるかはわかるが、モジュールを呼び出すためのコードを書かないといけなくて面倒。また、つくられるリソースは表示されるが、リソース間の依存関係はplanの出力からはわからない。</p>
<p>この問題を解決するために、Carinaには<code>module info</code>というコマンドを実装した。</p>
<hr />
<h2>module info コマンド</h2>
<p><code>module info</code>コマンドを実行すると、モジュールの情報が以下のように表示される。</p>
<p><img src="/images/2026/01/carina-module-info.png" alt="module info の出力" /></p>
<p>3つのセクションに分かれている。</p>
<h3>REQUIRES</h3>
<p>モジュールが必要とする入力を表示する。</p>
<pre><code>vpc: ref(aws.vpc)  (required)
cidr_blocks: list(cidr)  (required)
enable_https: bool = true
</code></pre>
<p>型情報と、必須かどうか、デフォルト値があるかどうかがわかる。</p>
<h3>CREATES</h3>
<p>モジュールが作成するリソースをツリー構造で表示する。</p>
<pre><code>input { vpc: ref(aws.vpc) }
└── web_sg: aws.security_group
    ├── http: aws.security_group.ingress_rule
    └── https: aws.security_group.ingress_rule
</code></pre>
<p>入力として受け取った<code>vpc</code>を起点に、どのリソースがどのリソースに依存しているかが視覚的にわかる。</p>
<h3>EXPOSES</h3>
<p>モジュールが外部に公開する出力を表示する。</p>
<pre><code>security_group: ref(aws.security_group)
  ← from: web_sg
</code></pre>
<p>出力の型と、その出力がモジュール内のどのリソースから来ているかがわかる。</p>
<hr />
<h2>今後</h2>
<p>まだ少ないリソース数と単純な依存関係でしか試していないが、モジュールで定義されているリソース構造を把握するのに役立ちそう。リソース数が増えたり、依存関係が複雑になったりするとどうなるか、引き続き試しながら改善していきたい。</p>

]]></content>
    </entry>

    <entry>
        <title type="html"><![CDATA[AWS Cloud Control APIは遅い？]]></title>
        <link href="https://mizzy.org/blog/2026/01/24/2/"/>
        <updated>2026-01-24T18:40:23+09:00</updated>
        <id>https://mizzy.org/blog/2026/01/24/2/</id>
        <content type="html"><![CDATA[
<p><a href="https://github.com/mizzy/carina">Carina</a>の開発中に、AWS Cloud Control APIが遅いことに気づいた。</p>
<hr />
<h2>Cloud Control APIを試した背景</h2>
<p>CarinaでAWSリソースを扱うにあたり、最初はaws-sdk-s3を使ってS3バケットの操作を実装していた。ただ、この方法だとリソースタイプごとに個別実装が必要になる。S3、EC2、IAM...とAWSのサービスは膨大にあるので、全部個別に実装するのは大変だ。生成AIがあるとはいえ、もっと楽にできないかと考えた。</p>
<p>そこで<a href="https://docs.aws.amazon.com/cloudcontrolapi/latest/userguide/what-is-cloudcontrolapi.html">Cloud Control API</a>を使うことを考えた。Cloud Control APIは、CloudFormationと同じリソースハンドラーを使った統一的なAPIで、様々なAWSリソースをCRUD操作できる。</p>
<p>Cloud Control APIを使う大きなメリットとして、CloudFormationのJSON Schemaが公開されていることがある。例えばS3バケットのスキーマは以下のコマンドで取得できる。</p>
<pre><code class="language-shell">aws cloudformation describe-type --type RESOURCE \
  --type-name AWS::S3::Bucket --query 'Schema' --output text
</code></pre>
<p>このスキーマを使えば、<a href="https://github.com/oxidecomputer/typify">typify</a>でRustの型を自動生成できる。生成した型を使ってバリデーションすれば、リソースごとに手動でバリデーションロジックを書く必要がなくなる。</p>
<p>というわけで、Cloud Control APIを使うよう<a href="https://github.com/mizzy/carina/pull/2">実装してみた</a>。</p>
<hr />
<h2>問題発覚</h2>
<p>S3バケットの<code>versioning_configuration</code>を変更する<code>apply</code>を実行したところ、完了までに20秒以上かかった。単純なプロパティ変更なのに遅すぎるのでは、と思って調べてみた。</p>
<hr />
<h2>計測結果</h2>
<p>直接S3 APIを叩いた場合と、Cloud Control APIを叩いた場合で比較してみた。</p>
<h3>直接S3 API</h3>
<pre><code class="language-shell">$ time aws s3api put-bucket-versioning \
  --bucket carina-test-logs-mizzy-2026 \
  --versioning-configuration Status=Suspended
</code></pre>
<p>所要時間: <strong>約0.4〜0.5秒</strong></p>
<h3>Cloud Control API</h3>
<pre><code class="language-shell">RESULT=$(aws cloudcontrol update-resource \
  --type-name &quot;AWS::S3::Bucket&quot; \
  --identifier &quot;carina-test-logs-mizzy-2026&quot; \
  --patch-document '[{&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/VersioningConfiguration&quot;,&quot;value&quot;:{&quot;Status&quot;:&quot;Enabled&quot;}}]')

REQUEST_TOKEN=$(echo &quot;$RESULT&quot; | jq -r '.ProgressEvent.RequestToken')
START=$(date +%s)

while true; do
  STATUS=$(aws cloudcontrol get-resource-request-status \
    --request-token &quot;$REQUEST_TOKEN&quot; | jq -r '.ProgressEvent.OperationStatus')
  echo &quot;[$(( $(date +%s) - START ))s] $STATUS&quot;
  [ &quot;$STATUS&quot; = &quot;SUCCESS&quot; ] || [ &quot;$STATUS&quot; = &quot;FAILED&quot; ] &amp;&amp; break
  sleep 1
done
</code></pre>
<p>完了までの所要時間: <strong>約23秒</strong></p>
<hr />
<h2>なぜ遅いのか</h2>
<p>Cloud Control APIはCloudFormationと同じリソースハンドラーを使っており、内部的にリソースの整合性チェックや安定化待ち（resource stabilization）を行っているようだ。</p>
<p>AWSの公式ブログ<a href="https://aws.amazon.com/blogs/devops/how-we-sped-up-aws-cloudformation-deployments-with-optimistic-stabilization/">How we sped up AWS CloudFormation deployments with optimistic stabilization</a>でも、CloudFormationのデプロイが遅い理由として「resource stabilization」に時間がかかることが説明されている。</p>
<hr />
<h2>まとめ</h2>
<table>
<thead>
<tr>
<th>方式</th>
<th>所要時間</th>
</tr>
</thead>
<tbody>
<tr>
<td>直接S3 API</td>
<td>約0.5秒</td>
</tr>
<tr>
<td>Cloud Control API</td>
<td>約23秒</td>
</tr>
</tbody>
</table>
<p>Cloud Control APIは統一的なインターフェースで様々なリソースを扱えるメリットがあるが、個別のAPIを直接叩くより大幅に遅い。速度が重要な場合は、リソースタイプごとに直接SDKを使う方がよさそう。</p>
<p>Carinaでの採用はやめた。</p>

]]></content>
    </entry>

    <entry>
        <title type="html"><![CDATA[CarinaというTerraformライクなツールをつくりはじめた]]></title>
        <link href="https://mizzy.org/blog/2026/01/24/1/"/>
        <updated>2026-01-24T13:47:59+09:00</updated>
        <id>https://mizzy.org/blog/2026/01/24/1/</id>
        <content type="html"><![CDATA[
<h2>きっかけ</h2>
<p>gfxさんの<a href="https://gfx.hatenablog.com/entry/2026/01/23/212644">個人が静的型付き言語のコンパイラをゼロから作れる時代が来た！</a>という記事を読んで、自分も何か、以前だったらつくろうと思っても面倒で手が出なかったようなものをつくってみよう、と思ってつくりはじめた。</p>
<p>自分のことを知ってる方ならご存じかと思うが、自分はInfrastructure as Codeが大好きで、普段からIaCのことばかり考えている。最近だとこんなことを考えて発表した。</p>
<script defer class="speakerdeck-embed" data-id="facd81a255fb4c32ab2d80c559f1ede1" data-ratio="1.7777777777777777" src="//speakerdeck.com/assets/embed.js"></script>
<p>Terraformは好きで、公私ともにとてもお世話になっているのだが、こうなっているといいな、と思う点が色々ある。だが、Terraformはそれなりに歴史も実績もあるツールで、とてもよくできているので、自分でいちからつくって、Terraformと同レベルで使えるようになるまで育てるのは大変すぎるな、と思っていた。が、gfxさんの記事を読んで、今ならいけそうだな、と思ってつくりはじめた。</p>
<hr />
<h2>Carinaについて</h2>
<p><a href="https://github.com/mizzy/carina">Carina</a>は、Rustで実装したTerraformライクなインフラ管理ツール。</p>
<p>基本的にはTerraformと同じなんだけど、今のところ違う点を挙げると以下のような感じ。</p>
<ul>
<li>独自DSLによるインフラ定義
<ul>
<li>今のところHCLをかなり参考にしているけど、微妙に違う部分もある</li>
<li>Terraformを使っていて、もっとこうなってるといいのにな、と思う部分を改善していく予定</li>
</ul>
</li>
<li>型がより厳密に定義されている
<ul>
<li>例えばTerraform aws providerではregionは文字列で<code>ap-northeast-1</code>と書くが、Carina aws providerではenumで定義されていて、<code>aws.Region.ap_northeast_1</code>のように書く</li>
</ul>
</li>
</ul>
<p>ちなみに、自分はツールに名前をつけるときは天体に関連する言葉を使うことが多い。Carinaはりゅうこつ座のことで、竜骨は船の重要な骨格部分。インフラを支えるツールにふさわしいかな、と思ってこの名前にした。</p>
<hr />
<h2>なぜRustか</h2>
<p>言語選定はClaude Codeと相談して決めた。候補としてはRust、Go、TypeScriptあたりが挙がった。</p>
<p>Rustを選んだ理由としては、</p>
<ul>
<li>強力な型システムで信頼性の高いインフラツールを作れる</li>
<li>パーサーライブラリのpestが使いやすい</li>
<li>非同期処理のエコシステム（tokio）が成熟している</li>
<li>AWS SDK for Rustが利用可能</li>
<li>シングルバイナリで配布しやすい</li>
</ul>
<p>といったあたりをClaude Codeが挙げてくれたけど、まあなんとなくRust使ってみるか、ぐらいで決めた。自分はRustにあまり馴染みがないけど、Claude Codeに書いてもらうなら問題ないだろうし、Rustを学ぶ良い機会になるかな、と。</p>
<hr />
<h2>DSL</h2>
<p><code>.crn</code>という拡張子のファイルにインフラを定義する。</p>
<pre><code>provider aws {
    region = aws.Region.ap_northeast_1
}

# 匿名リソース
aws.s3.bucket {
    name = &quot;my-app-logs&quot;
    region = aws.Region.ap_northeast_1
    versioning = true
    expiration_days = 90
}

# 名前付きリソース
let backup = aws.s3.bucket {
    name = &quot;my-app-backup&quot;
    region = aws.Region.ap_northeast_1
}
</code></pre>
<p>Terraformと似たような感じだけど、以下の点が異なる。</p>
<ul>
<li>リソースタイプの指定が<code>aws.s3.bucket</code>のようにドット区切り
<ul>
<li>Terraformの場合は<code>aws_s3_bucket</code>のようにアンダースコア区切り</li>
</ul>
</li>
<li>名前付きリソースは<code>let</code>で宣言
<ul>
<li>Terraformの場合は<code>resource &quot;aws_s3_bucket&quot; &quot;backup&quot;</code>のように書くし、リソース名が必須になるが、Carinaでは、他リソースから参照する必要がなければ、匿名にできるようにしている</li>
</ul>
</li>
<li>Data Sourceのことはまだ考えてなかったので、区別するためのキーワードが必要になりそうだけど、まだ決めていない</li>
</ul>
<p>Terraformだと、<code>resource &quot;aws_s3_bucket&quot; &quot;my_app_logs&quot;</code>のように書くが、リソースタイプがアンダースコア区切りなので、それに合わせてリソース名もアンダースコア区切りにすべきか、それともハイフン区切りにすべきか、といつも悩む。別にどちらでもいいんだけど、どちらでもいいということは、その時々で判断がぶれてしまうので、ぶれないようにしたい、と思ったのがこのような設計にした理由の一つ。</p>
<hr />
<h2>使い方</h2>
<p>Terraformと同様に<code>validate</code>、<code>plan</code>、<code>apply</code>というコマンドがある。</p>
<pre><code class="language-bash">$ carina validate example.crn
Validating...
✓ 2 resources validated successfully.
  • s3_bucket.my-app-logs
  • s3_bucket.my-app-backup

$ carina plan example.crn
Using AWS provider (region: ap-northeast-1)
Execution Plan:

  + s3_bucket.my-app-logs
      name: &quot;my-app-logs&quot;
      versioning: true
      expiration_days: 90
  + s3_bucket.my-app-backup
      name: &quot;my-app-backup&quot;

Plan: 2 to add, 0 to change, 0 to destroy.

$ carina apply example.crn
Applying changes...

  ✓ Create s3_bucket.my-app-logs
  ✓ Create s3_bucket.my-app-backup

Apply complete! 2 changes applied.
</code></pre>
<hr />
<h2>アーキテクチャ</h2>
<pre><code>DSL (.crn) → Parser → Resources → Differ → Plan (Effects) → Interpreter → Provider → Infrastructure
</code></pre>
<ul>
<li><strong>Parser</strong>: pestを使ってDSLをパース</li>
<li><strong>Differ</strong>: 現在の状態と望む状態を比較してEffectを生成</li>
<li><strong>Plan</strong>: Effectのコレクション</li>
<li><strong>Interpreter</strong>: PlanをProviderに渡して実行</li>
<li><strong>Provider</strong>: 実際のインフラ操作を行うトレイト</li>
</ul>
<p>Effectは<code>Create</code>、<code>Update</code>、<code>Delete</code>、<code>Read</code>の4種類があり、それぞれが値として扱われる。</p>
<hr />
<h2>今後</h2>
<p>現状、AWSのS3バケットのみ対応している。今後、Terraformこうなっているといいのにな、と思っていることが実際に実現できるのか、を実験する場にしていこうと考えている。</p>
<p>リポジトリはこちら。</p>
<p><a href="https://github.com/mizzy/carina">mizzy/carina: A functional infrastructure management tool</a></p>

]]></content>
    </entry>

    <entry>
        <title type="html"><![CDATA[YAPC::Fukuoka 2025 に参加して発表してきた]]></title>
        <link href="https://mizzy.org/blog/2025/11/17/1/"/>
        <updated>2025-11-17T17:46:56+09:00</updated>
        <id>https://mizzy.org/blog/2025/11/17/1/</id>
        <content type="html"><![CDATA[
<p>YAPC::Asiaの頃はすべて参加してきたけど、YAPC::Japanになってからはタイミングがあわず参加できていなかったので、10年ぶりの参加。</p>
<p>久しぶりの参加だし、発表もできたらうれしいな、と思ってプロポーザルを出したら通ったので、発表してきた。</p>
<hr />
<h2>発表内容</h2>
<p>「なぜインフラコードのモジュール化は難しいのか - アプリケーションコードとの本質的な違いから考える」というタイトルで発表した。</p>
<script defer class="speakerdeck-embed" data-id="facd81a255fb4c32ab2d80c559f1ede1" data-ratio="1.7777777777777777" src="//speakerdeck.com/assets/embed.js"></script>
<p>インフラコードのモジュール化について、アプリケーションコードと比較しながら、なぜ難しいのか、どう向き合うべきか、といったあたりを整理してみた内容。</p>
<p>インフラコードは「状態を記述」するのに対して、アプリケーションコードは「処理を記述」する、という本質的な違いがあって、そこからモジュール化設計のアプローチも変わってくる、という話。</p>
<p>会場は結構席が埋まってたと思う。質問もいくつかいただけてよかったし、その後話しかけてくださったり、懇親会等でも触れていただいたり、Xでもスライドに対する言及が多かったりで、関心を持ってもらえたようだ。「わかる」という反応が多くて、みんな同じようなもやもやを感じていたんだな、と思った。</p>
<p>久々の発表でペース配分がうまくできず、後半駆け足になってしまったのは反省点。もう少し内容を削っておいた方がよかったかも。</p>
<p><a href="https://sfujiwara.hatenablog.com/entry/yapc-fukuoka-2025">fujiwaraさんのブログ記事でも触れられている</a>のだけど、タイムテーブル上、同じ部屋の次のセッションがfujiwaraさんの発表で、二人ともメインとなるテーマが「正しい抽象化」という共通点があって、セットで聞くとよい流れになっていて、運営の方々の配慮を感じた。</p>
<script defer class="speakerdeck-embed" data-id="efb9db6a75274a6cbad76b6550c5259f" data-ratio="1.7777777777777777" src="//speakerdeck.com/assets/embed.js"></script>
<hr />
<h2>印象に残ったセッション</h2>
<p>聞いたものすべて面白かったけど、その中でも特に印象に残ったセッションを2つ紹介。本当は聞いたセッション全部について書きたいけど、長くなりすぎてしまうので。</p>
<h3>Agentに至る道 〜なぜLLMは自動でコードを書けるようになったのか〜</h3>
<p><a href="https://fortee.jp/yapc-fukuoka-2025/proposal/fb1e7046-74ea-4856-9311-7b7cd62a6018">mackee_w</a>さんの発表。</p>
<script defer class="speakerdeck-embed" data-id="cd7fba011b0842d3943c66ee3a6ab829" data-ratio="1.7777777777777777" src="//speakerdeck.com/assets/embed.js"></script>
<p>今回のYAPCのセッションの中で一番聞きたいと思っていたのがこの発表で、実際に聞いてみたら期待以上の内容だった。ベストトークはこれに投票した。</p>
<p>自分もRigelというAI Coding Agentを（まだ全然開発進んでないけど）作っているので、エージェントの理論的背景を知るために、どういった論文にあたると良いのかがわかってとても参考になった。</p>
<p>ChatGPTが登場した当時と比べて、2025年はコーディングエージェント技術がかなり浸透してきている。その背景にある「ReAct」といった概念を論文ベースで解説しつつ、後半はPerlを使ったコーディングエージェントのライブコーディングという内容。</p>
<p>ライブコーディング中にスペルミスを指摘させてもらって、参加してる感が得られてよかった。</p>
<p>その後懇親会の2次会でも、この辺りについてがっつりお話させてもらえて楽しかった。</p>
<h3>ある編集者のこれまでとこれから —— 開発者コミュニティと歩んだ四半世紀</h3>
<p><a href="https://fortee.jp/yapc-fukuoka-2025/proposal/1a8f9acd-4729-407c-997c-f08d4eddb894">稲尾さん</a>のゲストトーク。</p>
<script defer class="speakerdeck-embed" data-id="e44fa8d6b3c44c7f8000e1ac7b8af354" data-ratio="1.7777777777777777" src="//speakerdeck.com/assets/embed.js"></script>
<p>WEB+DB PRESSの編集者を長く務め、現在SmartHRのDevRelに従事されている稲尾さんが、開発者コミュニティとともに歩んできた四半世紀を振り返る内容。</p>
<p>自分と稲尾さんとの最初の出会いが、いつのかは忘れたけどYAPCの懇親会だったはずで、メガネフレームが同じ<a href="https://www.spec-espace.com/">spec espace</a>のモデル名の数字部分だけ微妙に違う、見た目がよく似たメタルフレームだった。しかも、自分はもうそのフレームは使っていないが、稲尾さんはいまだにそのフレームを使い続けていてすごい。おそらく15年以上は使い続けているのでは。</p>
<p>知り合ってから長いけれど知らなかった稲尾さんの四半世紀の歩みを知ることができてとても良かった。</p>
<hr />
<h2>踊り場</h2>
<p>2日目のタイムテーブルに突如現れた「踊り場」というトラック。詳しい説明はこちら。</p>
<p><a href="https://blog.yapcjapan.org/entry/2025/11/14/110000">YAPC::Fukuoka 2025のタイムテーブルにある「踊り場」とは何なのか #yapcjapan踊り場 #yapcjapan - YAPC::Japan 運営ブログ</a></p>
<p>自分もこの「踊り場」の中の以下のセッションに参加してみた。</p>
<h2>ゲストゲストトーク</h2>
<p>タイムテーブルのタイトルからだけだと何をやるのかわからないけど、稲尾さん自らによるご説明がこちら。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">企画を頂戴し、2日目朝イチの私の登壇が終わったあと場所を #yapcjapan踊り場 に移し、 @pastak さんらと行います！ 著者さん、読者の方、現職やコミュニティでご一緒くださっている方、執筆に興味がある方などなど、みなさまお気軽にご発言ください。 私のトークへのご質問やご感想なども。 #yapcjapan</p>&mdash; 稲尾尚徳 (@inao) <a href="https://twitter.com/inao/status/1989144070070157671?ref_src=twsrc%5Etfw">November 8, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>このセッションに対する感想です。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">今回のYAPCで一番印象に残った言葉「感想のカツアゲ」 ー Day 2稲尾さんセッション後の踊り場で、その場にいた全員（セッション参加していない人含む）が稲尾さんセッションの感想を強制的に述べさせられた</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1990216621156348105?ref_src=twsrc%5Etfw">November 11, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>他にも技術書の出版の話、特にお金にまつわる生々しい話なんかも聞けてよかった。</p>
<h2>Day 1 最速振り返り</h2>
<p>こちらはタイトルどおり、Day 1の振り返りを最速で行うセッション。途中からの参加でマイクを振られたので、「これの趣旨って何ですか？」と聞いてから自分が話したトークについてコメントした。参加できなかったセッションの概要が聞けてよかった。特にhirataraさんのセッション、聞こうと思っていたのはずなのに、なぜか別の部屋に行ってしまったので、その内容が聞けてよかった。スライドもこれから拝見します。</p>
<script defer class="speakerdeck-embed" data-id="a27e5888f693436da3f34377c0e096ae" data-ratio="1.7777777777777777" src="//speakerdeck.com/assets/embed.js"></script>
<h2>OSS開発者なら学生参加者いっぱい集められる説</h2>
<p>水ダウの企画のようなタイトルの、わかるようなわからないようなセッション。タイムテーブル上のタイトルとmoznionのポストに書かれているタイトルが微妙に違ってそう。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">#yapcjapan踊り場、明日の13時から「OSS開発者なら学生たくさん連れてこれる説」という催しを行います！　一番多く学生さんをリクルーティングして踊り場に連れてきた開発者には名誉が授与され、学生さんにはノベルティを進呈するというイベントになっているので怪しまずに来てください！ #yapcjapan</p>&mdash; moznion (@moznion) <a href="https://twitter.com/moznion/status/1989133587749445845?ref_src=twsrc%5Etfw">November 8, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>moznionのおふざけに巻き込まれるとめんどくさそうだな、遠巻きに見るだけにしようかな、と思いつつ中に入ってみたら、割とまともなセッションで、OSS開発者と学生さん双方向のパネルディスカッション、といった感じだった。</p>
<p>OSS開発者の人たち前に出て、とmoznionが言った時に、自分は最近それほどOSS活動してないので遠慮しようかな、と思ってたら、moznionに指名されたので前に出させてもらった。 各自自己紹介タイムがあったのだけど、Serverspecは学生さんたちは知らないだろうな、と思いつつ、「OSS Rookies of the yearをDockerとともに受賞した」という話をしたら、おー、という反応があってうれしかった。 また、どなたかがオライリー単著、というフォローも入れてくれた。</p>
<p>というわけで、しっかりと巻き込まれてきて楽しかった。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">#yapcjapan踊り場、あきらかに見切り発車企画だったんだけどめっちゃ良い話になって良かった、参加者のみなさんありがとうございました！　急に無茶振りしたパネラーのみなさま ( @yusukebe , @songumu , @fujiwara , @pyama86 , @gosukenator ) にも感謝！！！ #yapcjapan</p>&mdash; moznion (@moznion) <a href="https://twitter.com/moznion/status/1989562085701730607?ref_src=twsrc%5Etfw">November 9, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<hr />
<h2>クロージングキーノート</h2>
<p>今年のYAPCのクライマックス、P山さんのクロージングキーノート。</p>
<script defer class="speakerdeck-embed" data-id="479c0e9a98ea412b8337e011b10c8e8b" data-ratio="1.7777777777777777" src="//speakerdeck.com/assets/embed.js"></script>
<p>元々P山さんを知ったの、自分が辞めた会社になんか面白い人が入ったな、というのをTwitterで観測していて、特に<a href="https://x.com/hiboma">hiboma</a>に胸ぐら掴まれた、というエピソードを聞いて俄然興味を持った。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">「P山さん会ってみたい」「会わない方がいいっすよ」って会話してる</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/677886542279344128?ref_src=twsrc%5Etfw">December 18, 2015</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">昨夜鮨食べながら「まだP山さんに会ってないんだけど」「会わない方がいいです」ってやりとりした。</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/801001467003826176?ref_src=twsrc%5Etfw">November 22, 2016</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>ファーストコンタクトはこの辺りかなー。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">福岡Ruby会議02のランチ時に行った稚加榮、行列できてたけど、ある程度進んだところで、P山氏がイケメンなので顔パスでショートカットできたし、P山氏が奢ってくれたので、P山氏マジイケメン。</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/935081435165179905?ref_src=twsrc%5Etfw">November 27, 2017</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>会ってみたら、意外ととちゃんとした人だった。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">インターネットではオラオラしてるのに、あったら普通に敬語も使えるし、普通の人なんですねって言われるようになってきました。</p>&mdash; pyama (@pyama86) <a href="https://twitter.com/pyama86/status/967730170470711297?ref_src=twsrc%5Etfw">February 25, 2018</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>自分がP山さんと会う前に、他の人から聞く話で抱いていた印象は「何者かになりたくて足掻いているけど実力が足りない人」というものだった。本キーノートでは、その頃のP山さんの足掻きが、本人により具体的なエピソードとともに語られているのがとても興味深かった。今はもちろん、そんな印象は微塵も持っていない。</p>
<hr />
<h2>懇親会</h2>
<p>具体的に名前を挙げると、漏れてしまった人に申し訳ないので名前は挙げないが、はじめましての人、お久しぶりの人、以前からお会いしたかった人、いろいろな方とお話できて楽しかった。</p>
<p>自分のトークについて「あれはベストトークでもおかしくなかった」と言ってくださる方もいてうれしかった。</p>
<p>Findyの方にお声がけいただいて、「ドリンクアップ参加されるんですよね？」と聞かれたのだけど、以下の理由でキャンセルしてたので、ちょっと気まずかった。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">今日行われたFindy Drinkup at YAPC::Fukuoka 2025、最初申し込んでたんだけど、その後キャンセルしてしまった。酒が飲めない人間なので、クラフトビールのお店とかは遠慮してしまう。たとえソフトドリンクが置いてあったとしても、そのお店の一番のウリを注文しない、というのに躊躇いを覚えてしまう</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1989721290610213138?ref_src=twsrc%5Etfw">November 9, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h2>二次会</h2>
<p>moznionに声をかけられたので二次会へ。お店に予約を入れるために数えた時は22人だったはずだが、お店には35人ぐらいいた。懇親会会場からの移動で電車に乗った駅、以前妻が住んでいたところの最寄り駅だった。</p>
<p><a href="https://x.com/mackee_w">macopy</a>さんとサシでコーディングエージェントの話をがっつり話せてよかった。また、<a href="https://x.com/kfly8">kobaken</a>さんが途中から参加してくださり、macopyさんの趣味の車や3Dプリンターの話、kobakenさんが建てた家の話など、いろいろな話が聞けて楽しい時間だった。</p>
<hr />
<p>ここからはYAPCとは直接関係ないけど、YAPC参加のために来た福岡での自分の行動をXポストで振り返る。興味ない方は回れ右。</p>
<hr />
<h2>YAPC前夜</h2>
<h3>Day -6</h3>
<p><a href="https://phpcon.fukuoka.jp/2025/">PHPカンファレンス福岡2025</a>にも参加するために、11/7には既に福岡入りしていた。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">乗っていた飛行機が、着陸後の油圧系トラブルで動けなくなり、トーイングカーで駐機場まで牽引され、1時間遅れで到着した</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1986769517306126435?ref_src=twsrc%5Etfw">November 3, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h3>Day -5</h3>
<p>ホテルで朝食食べてたら仮歯が外れた。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">福岡でうまいものたくさん食べるぞ、と思ってたのに、治療中の歯の仮歯が外れてしまった。幸い、日曜もやっている歯科が近くにあって予約できた。</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1986921666950377784?ref_src=twsrc%5Etfw">November 4, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>PHPカンファレンス中にラーメン食べに行った。仮歯は外れてるけど痛みはなく、食べ物が詰まりやすいだけで特に支障はなかった。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">この記事で紹介されてたお店に行きました #yapcramen</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987011136370450914?ref_src=twsrc%5Etfw">November 4, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>夜もラーメン食べた。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">#yapcramen</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987098622228676670?ref_src=twsrc%5Etfw">November 4, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h3>Day -4</h3>
<p>福岡、仕事でよく来るんだけど観光したことないんだよな、と思い、敢えて小倉のホテルに泊まったので、門司港行って焼きカレー食べたり、小倉城に行って今屋のハンバーガー食べたり、鉄鍋餃子食べたりした。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">門司港に来た</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987334254561554763?ref_src=twsrc%5Etfw">November 5, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">くじら焼きカレー</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987339766782943412?ref_src=twsrc%5Etfw">November 5, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">門司港にGAFAがあった</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987342942286324083?ref_src=twsrc%5Etfw">November 5, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">小倉城見に来た</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987360824806297851?ref_src=twsrc%5Etfw">November 5, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">以前から食べたいと思ってた今屋のハンバーガーがあった</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987362629040627722?ref_src=twsrc%5Etfw">November 5, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">仮歯つけてもらった</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987437178256077224?ref_src=twsrc%5Etfw">November 5, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">https://t.co/P4YJTr8tYl</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987452392733057221?ref_src=twsrc%5Etfw">November 5, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">夜の小倉城を見に来た</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987461607140778055?ref_src=twsrc%5Etfw">November 5, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h3>Day -3</h3>
<p><a href="https://x.com/udzura">udzuraさん</a>おすすめのサンドイッチ屋さんでランチ。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">https://t.co/qgkfp2qR42</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987699280635965561?ref_src=twsrc%5Etfw">November 6, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>その後、定宿であるヒルトン福岡シーホークへ移動。このホテル、「まともなワークチェア」「広いデスク」「安定したインターネット回線」とパソコン仕事をするには最高の環境なので、福岡に来てホテルでも仕事をする必要がある時はここに泊まることが多い。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">小倉から福岡市内の定宿に移動した。ボトムの部屋からパノラミックスイートにアップグレードされた。</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1987789939095052297?ref_src=twsrc%5Etfw">November 6, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h3>Day -2</h3>
<p>昼飯。みんな「ひらお」に行ったみたいだが、自分は近くに「ひらお」がなかったので「たかお」に行った。「たかお」は関東にも店舗がある。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">#yapctempura</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1988079391025586465?ref_src=twsrc%5Etfw">November 7, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>夜はフルマネージド焼肉を堪能した。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">YAPC::Fukuoka 2025 Day -2 でフルマネージド焼肉にきてる</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1988174471950463344?ref_src=twsrc%5Etfw">November 7, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">@gosukenator
 さんに本当の肉を教えて頂きました。</p>&mdash; pyama (@pyama86) <a href="https://twitter.com/pyama86/status/1988197993238106317?ref_src=twsrc%5Etfw">November 7, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h3>Day -1</h3>
<p>太宰府天満宮に行った。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">なんかゴツい箱が出てきてびっくりした</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1988434800563417265?ref_src=twsrc%5Etfw">November 8, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">焼きたて梅ヶ枝餅を食べた</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1988444958656024761?ref_src=twsrc%5Etfw">November 8, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h3>Day 0</h3>
<p>レターパック投函するだけのつもりで外に出たのだけど、ホテル一階にあるポストはレターパックが入らなかった→郵便局まで行った→ついでにタワー登るか→タワーのレストラン貸切だった→ポーたま食べに行くか、となった。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">この辺りはよく来てるけど、タワーは初めて来た。</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1988791760915738874?ref_src=twsrc%5Etfw">November 9, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">https://t.co/vTF2d1ZGT3</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1988792862612549949?ref_src=twsrc%5Etfw">November 9, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>夜はP山さんがアレンジしてくれた食事会に参加した。YAPC前夜祭的な感じ。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">YAPC::Fukuoka 2025 Day 0 非公式前夜祭(P山会)</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1988927596604825805?ref_src=twsrc%5Etfw">November 9, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h3>Day 1</h3>
<p>公式の懇親会はなかったので、帰りに遭遇したhibomaを掴まえて一緒に飯を食いに行くことにした。途中P山さんにも遭遇し、特に予定はないとのことなので、一緒に行くことに。P山さんがいるとお店選びに困らないので大変助かる。さすが二次会のプロ。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">イカ🦑</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1989295710806880259?ref_src=twsrc%5Etfw">November 10, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">こうなった</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1989301159190725118?ref_src=twsrc%5Etfw">November 10, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h3>Day 2</h3>
<p>この日はYAPC本編最終日で公式の懇親会もあったので、YAPCに直接関係のある行動しかしてない。</p>
<h3>Day 3</h3>
<p>YAPC翌日。 思いがけずきれいな朝食写真が撮れた。ダイヤモンド会員なので、朝食は無料な上に、あまり混雑しないエグゼクティブラウンジでの朝食も選べるので、基本的に朝食はラウンジで食べている。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">朝飯</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1989838857232372010?ref_src=twsrc%5Etfw">November 11, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>日中はほとんど仕事していた。夜は呪術廻戦の映画を見に行った。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">福岡最後の夜は呪術廻戦で締める ー I'm at ユナイテッド・シネマ福岡ももち in 福岡市, Fukuoka https://t.co/ZBRAQxBiCk</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1990026228343210042?ref_src=twsrc%5Etfw">November 11, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<h3>Day 4</h3>
<p>YAPC翌々日の福岡最終日。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">福岡最終日の朝飯</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1990201194732814802?ref_src=twsrc%5Etfw">November 11, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">荷造りだいたい終わった。リモート朝会に参加してからチェックアウト。</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1990213007289483737?ref_src=twsrc%5Etfw">November 11, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">YAPC締めのラーメン #yapcramen #yapcjapan</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1990244417228472487?ref_src=twsrc%5Etfw">November 11, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>この後、東京には戻るが、翌日からのCloud Native Days Winter 2025にも参加するため、家には帰らず有明のホテルに直行した。</p>

]]></content>
    </entry>

    <entry>
        <title type="html"><![CDATA[RigelというAI Coding Agentを開発している]]></title>
        <link href="https://mizzy.org/blog/2025/08/30/2/"/>
        <updated>2025-08-30T21:31:14+09:00</updated>
        <id>https://mizzy.org/blog/2025/08/30/2/</id>
        <content type="html"><![CDATA[
<h2>きっかけ</h2>
<p>tokuhiromさんの<a href="https://blog.64p.org/entry/2025/08/29/170302">ashronというAI Coding Agentを開発している</a>というブログ記事や以下のポストを読んだ。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ashron っていう、Coding Agent を書いている - Blog::Amrta <a href="https://t.co/fKU4l0QTQq">https://t.co/fKU4l0QTQq</a></p>&mdash; tokuhirom (@tokuhirom) <a href="https://twitter.com/tokuhirom/status/1960847865967780266?ref_src=twsrc%5Etfw">August 29, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>Clineがいい、Cursorだ、いやClaude Codeだ、Codexだ、みたいな流行に振り回されたくないし、ローカルLLMをうまく扱えるコーディングエージェントもなかなか見つからない。CodexがローカルLLM対応してるけど、期待したとおりに動いてくれない。</p>
<p>なので、自分でAI Coding Agentを作るのがよいかもしれない、と考えていた。</p>
<p>そんな状況で、tokuhiromさんの記事を読んで背中を押された感じ。</p>
<p>というわけで、自分もRigelというAI Coding Agentを作り始めた。</p>
<hr />
<h2>Rigelについて</h2>
<p><a href="https://github.com/mizzy/rigel">Rigel</a>は、Goで実装しているAI Coding Agent。</p>
<p>主な特徴は以下の通り。</p>
<ul>
<li>ターミナルベースのチャットインターフェース</li>
<li>複数のLLMプロバイダーに対応（Anthropic Claude、Ollama）</li>
<li>サンドボックスでの安全なコード実行</li>
</ul>
<p>特にローカルLLMを扱えるようにOllamaに対応しているのがポイント。何も設定しない場合、デフォルトでローカルのOllama + gpt-oss:20bを利用するようになっている。エージェント実行中に、AnthropicかOllamaかを切り替えたり、モデルを切り替えたりもできる。</p>
<p>実際に動かすとこんな感じ。</p>
<p><img src="/images/2025/08/rigel.jpg" alt="Rigelのスクリーンショット" /></p>
<p>ちなみにRigelという名前はオリオン座の1等星から拝借しているけど、特に意味はない。リゲルは青白い星なので、色使いもそんな感じにしている。</p>
<hr />
<h2>今後の開発</h2>
<p>とりあえずベースができて会話できる程度にはなったけど、まだコーディングエージェントとして使える状態にはなっていない。今後はツール周りと、コンテキストをどう扱うか、といったあたりが開発の中心になりそう。</p>

]]></content>
    </entry>

    <entry>
        <title type="html"><![CDATA[ObsidianとQuartz 4でつくる雑なメモサイト]]></title>
        <link href="https://mizzy.org/blog/2025/08/30/1/"/>
        <updated>2025-08-30T12:30:00+09:00</updated>
        <id>https://mizzy.org/blog/2025/08/30/1/</id>
        <content type="html"><![CDATA[
<p>今までGistやはてなブログに書いていたホテルのワークチェアについてのメモだけど、もっと雑に更新したいし、行ったことあるホテルでは実際に椅子がどうだったのか、といったあたりもまとめておきたいな、と思った。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">これ、もっと雑に更新したいし、行ったことあるホテルでは実際に椅子がどうだったのか、といったあたりもまとめておきたいな、と思ったので、ブログからは削除して https://t.co/KoTUjAm69A に内容を移した https://t.co/41tPIx2dMx</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1961037784397021260?ref_src=twsrc%5Etfw">August 28, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<p>なので、別サイトで管理することにした。</p>
<p>どうやって作ろうかな、と考えたところで、ObsidianとQuartz 4の組み合わせを使うことにした。</p>
<!-- markdownlint-disable MD013 -->
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ObisidianでMarkdownを書いてQuartz 4でGitHub PagesにPublishするようにした https://t.co/RwjecYnrw5</p>&mdash; mizzy (@gosukenator) <a href="https://twitter.com/gosukenator/status/1961040479656849472?ref_src=twsrc%5Etfw">August 28, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<!-- markdownlint-enable MD013 -->
<hr />
<h2>ObsidianとQuartz 4の組み合わせ</h2>
<p><a href="https://obsidian.md/">Obsidian</a>は、Markdownベースのナレッジベースアプリ。ローカルで動作するので、データは自分の手元に置いておける。</p>
<p><a href="https://quartz.jzhao.xyz/">Quartz 4</a>は、Obsidianで書いたMarkdownファイルを静的サイトに変換してくれるツール。GitHub Pagesにデプロイできる。</p>
<p>この組み合わせの何がいいかというと、</p>
<ul>
<li>Obsidianで書いたメモをそのまま公開できる</li>
<li>GitHub Actionsで自動デプロイできる</li>
</ul>
<p>といったあたり。</p>
<hr />
<h2>セットアップ</h2>
<p>Quartz 4のセットアップは、ghコマンドとghqコマンドを使うと簡単。</p>
<pre><code class="language-shell">gh repo fork jackyzha0/quartz --clone=false
ghq get git@github.com:YOUR_USERNAME/quartz.git
cd $(ghq root)/github.com/YOUR_USERNAME/quartz
npm i
npx quartz create
</code></pre>
<p>あとは、<code>content</code>ディレクトリにObsidianのVaultを配置するか、シンボリックリンクを張るかすれば良い。</p>
<p>自分の場合は、Obsidianで管理してるVaultの<code>publish</code>ディレクトリだけを公開したかったので、Makefileを使って<code>content</code>ディレクトリにコピーするようにした。</p>
<p>実際のコードは<a href="https://github.com/hotel-memo/hotel-memo.github.io">hotel-memo/hotel-memo.github.io</a>にある。</p>
<hr />
<h2>雑なメモサイトとしての使い心地</h2>
<p>実際に<a href="https://hotel-memo.github.io/">ホテルメモサイト</a>を作って運用してみたところ、かなり使い心地が良い。</p>
<p>Obsidianで書いて、<code>make serve</code>でローカルでプレビュー確認、<code>make publish</code>で公開、という感じで手軽に運用できる。ブログほど構えずに、本当に雑なメモとして書ける。</p>
<hr />
<p>参考：</p>
<ul>
<li><a href="https://obsidian.md/">Obsidian</a></li>
<li><a href="https://quartz.jzhao.xyz/">Quartz 4</a></li>
<li><a href="https://hotel-memo.github.io/">ホテルメモ</a></li>
</ul>

]]></content>
    </entry>

</feed>
